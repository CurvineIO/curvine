ðŸš€ Starting 100 runs of: cargo test --package curvine-server --test journal_test -- check_raft_state --exact --nocapture
ðŸ“… Started at: Sun Nov 30 09:03:08 +07 2025
----------------------------------------
ðŸ”„ Run 1/100

running 1 test
25/11/30 09:03:09.151 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:03:09.162 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:03:09.162 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:03:09.163 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:03:09.181 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:03:09.182 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:03:09.191 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:03:09.191 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:03:09.192 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:03:09.209 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:03:09.209 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:03:09.209 INFO raft.rs:2668 switched to configuration, raft_id: 64772, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64772, 64773} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:03:09.209 INFO raft.rs:1132 became follower at term 0, raft_id: 64772, term: 0    
25/11/30 09:03:09.209 INFO raft.rs:393 newRaft, raft_id: 64772, peers: Configuration { incoming: Configuration { voters: {64772, 64773} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:03:09.209 INFO raw_node.rs:315 RawNode created with id 64772., raft_id: 64772, id: 64772    
25/11/30 09:03:09.211 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64772, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:03:09.211 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:03:09.211 INFO raft.rs:2668 switched to configuration, raft_id: 64773, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64772, 64773} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:03:09.211 INFO raft.rs:1132 became follower at term 0, raft_id: 64773, term: 0    
25/11/30 09:03:09.211 INFO raft.rs:393 newRaft, raft_id: 64773, peers: Configuration { incoming: Configuration { voters: {64772, 64773} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:03:09.211 INFO raw_node.rs:315 RawNode created with id 64773., raft_id: 64773, id: 64773    
25/11/30 09:03:09.212 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64773, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:03:11.151 INFO raft.rs:1562 starting a new election, raft_id: 64773, term: 0    
25/11/30 09:03:11.152 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64773, term: 0    
25/11/30 09:03:11.152 INFO raft.rs:1311 broadcasting vote request, raft_id: 64773, to: [64772], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:03:11.152 INFO raft_node.rs:457 Raft soft state change, node id 64773, current leader 0    
25/11/30 09:03:11.154 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64773 [logterm: 0, index: 0] at term 0, raft_id: 64772, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64773, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:03:11.260 INFO raft.rs:2224 received votes response, raft_id: 64773, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64772, vote: true    
25/11/30 09:03:11.261 INFO raft.rs:1156 became candidate at term 1, raft_id: 64773, term: 1    
25/11/30 09:03:11.261 INFO raft.rs:1311 broadcasting vote request, raft_id: 64773, to: [64772], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:03:11.360 INFO raft.rs:1562 starting a new election, raft_id: 64772, term: 0    
25/11/30 09:03:11.361 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64772, term: 0    
25/11/30 09:03:11.361 INFO raft.rs:1311 broadcasting vote request, raft_id: 64772, to: [64773], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:03:11.361 INFO raft_node.rs:457 Raft soft state change, node id 64772, current leader 0    
25/11/30 09:03:11.362 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64773] rejected vote from 64772 [logterm: 0, index: 0] at term 1, raft_id: 64773, msg type: MsgRequestPreVote, term: 1, msg_index: 0, msg_term: 0, from: 64772, vote: 64773, log_index: 0, log_term: 0    
25/11/30 09:03:11.463 INFO raft_node.rs:457 Raft soft state change, node id 64773, current leader 0    
25/11/30 09:03:11.464 INFO raft.rs:1376 received a message with higher term from 64773, raft_id: 64772, msg type: MsgRequestPreVoteResponse, message_term: 1, term: 0, from: 64773    
25/11/30 09:03:11.464 INFO raft.rs:1132 became follower at term 1, raft_id: 64772, term: 1    
25/11/30 09:03:11.464 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64773 [logterm: 0, index: 0] at term 1, raft_id: 64772, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64773, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:03:11.567 INFO raft_node.rs:457 Raft soft state change, node id 64772, current leader 0    
25/11/30 09:03:11.567 INFO raft.rs:2224 received votes response, raft_id: 64773, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64772, vote: true    
25/11/30 09:03:11.567 INFO raft.rs:1240 became leader at term 1, raft_id: 64773, term: 1    
25/11/30 09:03:11.671 INFO raft_node.rs:457 Raft soft state change, node id 64773, current leader 64773    
25/11/30 09:03:11.683 INFO journal_test.rs:140 state 1 Standby    
25/11/30 09:03:11.683 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x13ae4a020, 0x11af04f30, 0x11b804d70, 0x11b805320], store: "<InodeStore>" }
inode: 0x11b805320
complete_file: 1764468191686
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13ae4a020, 0x11af04f30, 0x11b8058b0], store: "<InodeStore>" }
inode: 0x11b8058b0
complete_file: 1764468191687
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13ae4a020, 0x11af04f30, 0x11b8058b0], store: "<InodeStore>" }
inode: 0x11b8058b0
complete_file: 1764468191687
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:03:11.689 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2087639686, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:03:11.689 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1783015147, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:03:11.774 INFO raft_node.rs:457 Raft soft state change, node id 64772, current leader 64773    
25/11/30 09:03:19.278 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2087639686, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:03:20.216 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1783015147, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.55s

âœ… Run 1 PASSED
ðŸ“Š Progress: 1 success, 0 fails
----------------------------------------
ðŸ”„ Run 2/100

running 1 test
25/11/30 09:03:42.406 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:03:42.417 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:03:42.417 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:03:42.418 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:03:42.437 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:03:42.438 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:03:42.449 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:03:42.449 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:03:42.449 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:03:42.468 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:03:42.468 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:03:42.468 INFO raft.rs:2668 switched to configuration, raft_id: 64779, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64780, 64779} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:03:42.468 INFO raft.rs:1132 became follower at term 0, raft_id: 64779, term: 0    
25/11/30 09:03:42.468 INFO raft.rs:393 newRaft, raft_id: 64779, peers: Configuration { incoming: Configuration { voters: {64780, 64779} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:03:42.468 INFO raw_node.rs:315 RawNode created with id 64779., raft_id: 64779, id: 64779    
25/11/30 09:03:42.470 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64779, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:03:42.471 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:03:42.471 INFO raft.rs:2668 switched to configuration, raft_id: 64780, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64780, 64779} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:03:42.471 INFO raft.rs:1132 became follower at term 0, raft_id: 64780, term: 0    
25/11/30 09:03:42.471 INFO raft.rs:393 newRaft, raft_id: 64780, peers: Configuration { incoming: Configuration { voters: {64780, 64779} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:03:42.471 INFO raw_node.rs:315 RawNode created with id 64780., raft_id: 64780, id: 64780    
25/11/30 09:03:42.472 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64780, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:03:44.103 INFO raft.rs:1562 starting a new election, raft_id: 64780, term: 0    
25/11/30 09:03:44.104 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64780, term: 0    
25/11/30 09:03:44.104 INFO raft.rs:1311 broadcasting vote request, raft_id: 64780, to: [64779], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:03:44.104 INFO raft_node.rs:457 Raft soft state change, node id 64780, current leader 0    
25/11/30 09:03:44.107 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64780 [logterm: 0, index: 0] at term 0, raft_id: 64779, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64780, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:03:44.212 INFO raft.rs:2224 received votes response, raft_id: 64780, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64779, vote: true    
25/11/30 09:03:44.213 INFO raft.rs:1156 became candidate at term 1, raft_id: 64780, term: 1    
25/11/30 09:03:44.213 INFO raft.rs:1311 broadcasting vote request, raft_id: 64780, to: [64779], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:03:44.315 INFO raft_node.rs:457 Raft soft state change, node id 64780, current leader 0    
25/11/30 09:03:44.315 INFO raft.rs:1376 received a message with higher term from 64780, raft_id: 64779, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64780    
25/11/30 09:03:44.316 INFO raft.rs:1132 became follower at term 1, raft_id: 64779, term: 1    
25/11/30 09:03:44.316 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64780 [logterm: 0, index: 0] at term 1, raft_id: 64779, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64780, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:03:44.419 INFO raft.rs:2224 received votes response, raft_id: 64780, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64779, vote: true    
25/11/30 09:03:44.419 INFO raft.rs:1240 became leader at term 1, raft_id: 64780, term: 1    
25/11/30 09:03:44.521 INFO raft_node.rs:457 Raft soft state change, node id 64780, current leader 64780    
25/11/30 09:03:44.535 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:03:44.535 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x126e14d20, 0x12784ce80, 0x126f0d5b0, 0x12784cd40], store: "<InodeStore>" }
inode: 0x12784cd40
complete_file: 1764468224537
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x126e14d20, 0x12784ce80, 0x126e29420], store: "<InodeStore>" }
inode: 0x126e29420
complete_file: 1764468224537
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x126e14d20, 0x12784ce80, 0x126e29640], store: "<InodeStore>" }
inode: 0x126e29640
complete_file: 1764468224537
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:03:44.538 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 743885987, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:03:44.538 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 479503888, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:03:44.625 INFO raft_node.rs:457 Raft soft state change, node id 64779, current leader 64780    
25/11/30 09:03:52.021 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 743885987, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:03:53.045 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 479503888, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.15s

âœ… Run 2 PASSED
ðŸ“Š Progress: 2 success, 0 fails
----------------------------------------
ðŸ”„ Run 3/100

running 1 test
25/11/30 09:04:15.334 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:04:15.344 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:04:15.345 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:04:15.345 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:04:15.362 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:04:15.364 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:04:15.372 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:04:15.372 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:04:15.373 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:04:15.390 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:04:15.390 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:04:15.390 INFO raft.rs:2668 switched to configuration, raft_id: 64785, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64785, 64786} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:04:15.390 INFO raft.rs:1132 became follower at term 0, raft_id: 64785, term: 0    
25/11/30 09:04:15.390 INFO raft.rs:393 newRaft, raft_id: 64785, peers: Configuration { incoming: Configuration { voters: {64785, 64786} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:04:15.390 INFO raw_node.rs:315 RawNode created with id 64785., raft_id: 64785, id: 64785    
25/11/30 09:04:15.392 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64785, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:04:15.392 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:04:15.392 INFO raft.rs:2668 switched to configuration, raft_id: 64786, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64785, 64786} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:04:15.392 INFO raft.rs:1132 became follower at term 0, raft_id: 64786, term: 0    
25/11/30 09:04:15.392 INFO raft.rs:393 newRaft, raft_id: 64786, peers: Configuration { incoming: Configuration { voters: {64785, 64786} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:04:15.392 INFO raw_node.rs:315 RawNode created with id 64786., raft_id: 64786, id: 64786    
25/11/30 09:04:15.393 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64786, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:04:17.431 INFO raft.rs:1562 starting a new election, raft_id: 64786, term: 0    
25/11/30 09:04:17.432 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64786, term: 0    
25/11/30 09:04:17.432 INFO raft.rs:1311 broadcasting vote request, raft_id: 64786, to: [64785], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:04:17.432 INFO raft_node.rs:457 Raft soft state change, node id 64786, current leader 0    
25/11/30 09:04:17.434 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64786 [logterm: 0, index: 0] at term 0, raft_id: 64785, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64786, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:04:17.539 INFO raft.rs:2224 received votes response, raft_id: 64786, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64785, vote: true    
25/11/30 09:04:17.539 INFO raft.rs:1156 became candidate at term 1, raft_id: 64786, term: 1    
25/11/30 09:04:17.539 INFO raft.rs:1311 broadcasting vote request, raft_id: 64786, to: [64785], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:04:17.642 INFO raft_node.rs:457 Raft soft state change, node id 64786, current leader 0    
25/11/30 09:04:17.643 INFO raft.rs:1376 received a message with higher term from 64786, raft_id: 64785, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64786    
25/11/30 09:04:17.643 INFO raft.rs:1132 became follower at term 1, raft_id: 64785, term: 1    
25/11/30 09:04:17.643 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64786 [logterm: 0, index: 0] at term 1, raft_id: 64785, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64786, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:04:17.746 INFO raft.rs:2224 received votes response, raft_id: 64786, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64785, vote: true    
25/11/30 09:04:17.746 INFO raft.rs:1240 became leader at term 1, raft_id: 64786, term: 1    
25/11/30 09:04:17.849 INFO raft_node.rs:457 Raft soft state change, node id 64786, current leader 64786    
25/11/30 09:04:17.866 INFO journal_test.rs:140 state 1 Exit    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x14c8328a0, 0x12b804540, 0x12b805610, 0x12b805760], store: "<InodeStore>" }
inode: 0x12b805760
complete_file: 1764468257869
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14c8328a0, 0x12b804540, 0x12b905650], store: "<InodeStore>" }
inode: 0x12b905650
complete_file: 1764468257870
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14c8328a0, 0x12b804540, 0x12b9055e0], store: "<InodeStore>" }
inode: 0x12b9055e0
complete_file: 1764468257870
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:04:17.866 INFO journal_test.rs:141 state 2 Active    
25/11/30 09:04:17.871 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 733531917, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:04:17.872 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 414545586, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:04:17.952 INFO raft_node.rs:457 Raft soft state change, node id 64785, current leader 64786    
25/11/30 09:04:25.356 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 733531917, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:04:26.282 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 414545586, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.55s

âœ… Run 3 PASSED
ðŸ“Š Progress: 3 success, 0 fails
----------------------------------------
ðŸ”„ Run 4/100

running 1 test
25/11/30 09:04:48.673 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:04:48.684 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:04:48.684 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:04:48.685 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:04:48.702 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:04:48.703 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:04:48.712 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:04:48.712 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:04:48.713 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:04:48.729 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:04:48.730 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:04:48.730 INFO raft.rs:2668 switched to configuration, raft_id: 64790, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64790, 64791} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:04:48.730 INFO raft.rs:1132 became follower at term 0, raft_id: 64790, term: 0    
25/11/30 09:04:48.730 INFO raft.rs:393 newRaft, raft_id: 64790, peers: Configuration { incoming: Configuration { voters: {64790, 64791} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:04:48.730 INFO raw_node.rs:315 RawNode created with id 64790., raft_id: 64790, id: 64790    
25/11/30 09:04:48.732 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64790, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:04:48.732 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:04:48.732 INFO raft.rs:2668 switched to configuration, raft_id: 64791, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64790, 64791} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:04:48.732 INFO raft.rs:1132 became follower at term 0, raft_id: 64791, term: 0    
25/11/30 09:04:48.732 INFO raft.rs:393 newRaft, raft_id: 64791, peers: Configuration { incoming: Configuration { voters: {64790, 64791} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:04:48.732 INFO raw_node.rs:315 RawNode created with id 64791., raft_id: 64791, id: 64791    
25/11/30 09:04:48.733 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64791, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:04:50.566 INFO raft.rs:1562 starting a new election, raft_id: 64790, term: 0    
25/11/30 09:04:50.567 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64790, term: 0    
25/11/30 09:04:50.567 INFO raft.rs:1311 broadcasting vote request, raft_id: 64790, to: [64791], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:04:50.567 INFO raft_node.rs:457 Raft soft state change, node id 64790, current leader 0    
25/11/30 09:04:50.569 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64790 [logterm: 0, index: 0] at term 0, raft_id: 64791, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64790, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:04:50.672 INFO raft.rs:2224 received votes response, raft_id: 64790, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64791, vote: true    
25/11/30 09:04:50.672 INFO raft.rs:1156 became candidate at term 1, raft_id: 64790, term: 1    
25/11/30 09:04:50.672 INFO raft.rs:1311 broadcasting vote request, raft_id: 64790, to: [64791], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:04:50.774 INFO raft_node.rs:457 Raft soft state change, node id 64790, current leader 0    
25/11/30 09:04:50.775 INFO raft.rs:1376 received a message with higher term from 64790, raft_id: 64791, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64790    
25/11/30 09:04:50.776 INFO raft.rs:1132 became follower at term 1, raft_id: 64791, term: 1    
25/11/30 09:04:50.776 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64790 [logterm: 0, index: 0] at term 1, raft_id: 64791, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64790, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:04:50.879 INFO raft.rs:2224 received votes response, raft_id: 64790, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64791, vote: true    
25/11/30 09:04:50.879 INFO raft.rs:1240 became leader at term 1, raft_id: 64790, term: 1    
25/11/30 09:04:50.981 INFO raft_node.rs:457 Raft soft state change, node id 64790, current leader 64790    
25/11/30 09:04:51.006 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:04:51.006 INFO journal_test.rs:141 state 2 Exit    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x151616520, 0x1320050e0, 0x132006300, 0x132006870], store: "<InodeStore>" }
inode: 0x132006870
complete_file: 1764468291008
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x151616520, 0x1320050e0, 0x132006190], store: "<InodeStore>" }
inode: 0x132006190
complete_file: 1764468291008
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x151616520, 0x1320050e0, 0x132006190], store: "<InodeStore>" }
inode: 0x132006190
complete_file: 1764468291009
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:04:51.010 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1882956404, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:04:51.010 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 476595826, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:04:51.084 INFO raft_node.rs:457 Raft soft state change, node id 64791, current leader 64790    
25/11/30 09:04:58.478 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1882956404, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:04:59.409 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 476595826, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.35s

âœ… Run 4 PASSED
ðŸ“Š Progress: 4 success, 0 fails
----------------------------------------
ðŸ”„ Run 5/100

running 1 test
25/11/30 09:05:21.822 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:05:21.833 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:05:21.833 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:05:21.834 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:05:21.852 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:05:21.853 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:05:21.862 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:05:21.862 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:05:21.863 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:05:21.880 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:05:21.880 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:05:21.881 INFO raft.rs:2668 switched to configuration, raft_id: 64795, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64796, 64795} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:05:21.881 INFO raft.rs:1132 became follower at term 0, raft_id: 64795, term: 0    
25/11/30 09:05:21.881 INFO raft.rs:393 newRaft, raft_id: 64795, peers: Configuration { incoming: Configuration { voters: {64796, 64795} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:05:21.881 INFO raw_node.rs:315 RawNode created with id 64795., raft_id: 64795, id: 64795    
25/11/30 09:05:21.882 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64795, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:05:21.882 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:05:21.883 INFO raft.rs:2668 switched to configuration, raft_id: 64796, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64796, 64795} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:05:21.883 INFO raft.rs:1132 became follower at term 0, raft_id: 64796, term: 0    
25/11/30 09:05:21.883 INFO raft.rs:393 newRaft, raft_id: 64796, peers: Configuration { incoming: Configuration { voters: {64796, 64795} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:05:21.883 INFO raw_node.rs:315 RawNode created with id 64796., raft_id: 64796, id: 64796    
25/11/30 09:05:21.883 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64796, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:05:23.616 INFO raft.rs:1562 starting a new election, raft_id: 64796, term: 0    
25/11/30 09:05:23.617 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64796, term: 0    
25/11/30 09:05:23.617 INFO raft.rs:1311 broadcasting vote request, raft_id: 64796, to: [64795], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:05:23.617 INFO raft_node.rs:457 Raft soft state change, node id 64796, current leader 0    
25/11/30 09:05:23.618 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64796 [logterm: 0, index: 0] at term 0, raft_id: 64795, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64796, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:05:23.722 INFO raft.rs:2224 received votes response, raft_id: 64796, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64795, vote: true    
25/11/30 09:05:23.723 INFO raft.rs:1156 became candidate at term 1, raft_id: 64796, term: 1    
25/11/30 09:05:23.723 INFO raft.rs:1311 broadcasting vote request, raft_id: 64796, to: [64795], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:05:23.824 INFO raft_node.rs:457 Raft soft state change, node id 64796, current leader 0    
25/11/30 09:05:23.825 INFO raft.rs:1376 received a message with higher term from 64796, raft_id: 64795, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64796    
25/11/30 09:05:23.826 INFO raft.rs:1132 became follower at term 1, raft_id: 64795, term: 1    
25/11/30 09:05:23.826 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64796 [logterm: 0, index: 0] at term 1, raft_id: 64795, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64796, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:05:23.929 INFO raft.rs:2224 received votes response, raft_id: 64796, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64795, vote: true    
25/11/30 09:05:23.929 INFO raft.rs:1240 became leader at term 1, raft_id: 64796, term: 1    
25/11/30 09:05:24.030 INFO raft_node.rs:457 Raft soft state change, node id 64796, current leader 64796    
25/11/30 09:05:24.054 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:05:24.054 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x14462d4b0, 0x1246052b0, 0x124606290, 0x125004df0], store: "<InodeStore>" }
inode: 0x125004df0
complete_file: 1764468324056
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14462d4b0, 0x1246052b0, 0x1250053f0], store: "<InodeStore>" }
inode: 0x1250053f0
complete_file: 1764468324057
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14462d4b0, 0x1246052b0, 0x125005720], store: "<InodeStore>" }
inode: 0x125005720
complete_file: 1764468324057
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:05:24.058 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2651159541, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:05:24.059 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 4179211908, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:05:24.133 INFO raft_node.rs:457 Raft soft state change, node id 64795, current leader 64796    
25/11/30 09:05:31.648 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2651159541, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:05:32.574 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 4179211908, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.24s

âœ… Run 5 PASSED
ðŸ“Š Progress: 5 success, 0 fails
----------------------------------------
ðŸ”„ Run 6/100

running 1 test
25/11/30 09:05:54.797 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:05:54.809 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:05:54.809 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:05:54.810 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:05:54.829 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:05:54.830 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:05:54.841 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:05:54.841 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:05:54.842 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:05:54.862 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:05:54.862 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:05:54.863 INFO raft.rs:2668 switched to configuration, raft_id: 64802, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64802, 64803} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:05:54.863 INFO raft.rs:1132 became follower at term 0, raft_id: 64802, term: 0    
25/11/30 09:05:54.863 INFO raft.rs:393 newRaft, raft_id: 64802, peers: Configuration { incoming: Configuration { voters: {64802, 64803} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:05:54.863 INFO raw_node.rs:315 RawNode created with id 64802., raft_id: 64802, id: 64802    
25/11/30 09:05:54.864 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64802, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:05:54.865 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:05:54.865 INFO raft.rs:2668 switched to configuration, raft_id: 64803, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64802, 64803} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:05:54.865 INFO raft.rs:1132 became follower at term 0, raft_id: 64803, term: 0    
25/11/30 09:05:54.865 INFO raft.rs:393 newRaft, raft_id: 64803, peers: Configuration { incoming: Configuration { voters: {64802, 64803} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:05:54.865 INFO raw_node.rs:315 RawNode created with id 64803., raft_id: 64803, id: 64803    
25/11/30 09:05:54.865 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64803, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:05:55.885 INFO raft.rs:1562 starting a new election, raft_id: 64803, term: 0    
25/11/30 09:05:55.885 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64803, term: 0    
25/11/30 09:05:55.885 INFO raft.rs:1311 broadcasting vote request, raft_id: 64803, to: [64802], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:05:55.885 INFO raft_node.rs:457 Raft soft state change, node id 64803, current leader 0    
25/11/30 09:05:55.886 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64803 [logterm: 0, index: 0] at term 0, raft_id: 64802, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64803, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:05:55.989 INFO raft.rs:1562 starting a new election, raft_id: 64802, term: 0    
25/11/30 09:05:55.989 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64802, term: 0    
25/11/30 09:05:55.989 INFO raft.rs:1311 broadcasting vote request, raft_id: 64802, to: [64803], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:05:55.989 INFO raft_node.rs:457 Raft soft state change, node id 64802, current leader 0    
25/11/30 09:05:55.990 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64802 [logterm: 0, index: 0] at term 0, raft_id: 64803, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64802, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:05:55.990 INFO raft.rs:2224 received votes response, raft_id: 64803, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64802, vote: true    
25/11/30 09:05:55.990 INFO raft.rs:1156 became candidate at term 1, raft_id: 64803, term: 1    
25/11/30 09:05:55.990 INFO raft.rs:1311 broadcasting vote request, raft_id: 64803, to: [64802], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:05:56.093 INFO raft_node.rs:457 Raft soft state change, node id 64803, current leader 0    
25/11/30 09:05:56.093 INFO raft.rs:2224 received votes response, raft_id: 64802, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64803, vote: true    
25/11/30 09:05:56.093 INFO raft.rs:1156 became candidate at term 1, raft_id: 64802, term: 1    
25/11/30 09:05:56.093 INFO raft.rs:1311 broadcasting vote request, raft_id: 64802, to: [64803], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:05:56.093 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64802] rejected vote from 64803 [logterm: 0, index: 0] at term 1, raft_id: 64802, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64803, vote: 64802, log_index: 0, log_term: 0    
25/11/30 09:05:56.195 INFO raft_node.rs:457 Raft soft state change, node id 64802, current leader 0    
25/11/30 09:05:56.196 INFO raft.rs:2224 received votes response, raft_id: 64803, term: 1, type: MsgRequestVoteResponse, approvals: 1, rejections: 1, from: 64802, vote: false    
25/11/30 09:05:56.196 INFO raft.rs:1132 became follower at term 1, raft_id: 64803, term: 1    
25/11/30 09:05:56.196 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64803] rejected vote from 64802 [logterm: 0, index: 0] at term 1, raft_id: 64803, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64802, vote: 64803, log_index: 0, log_term: 0    
25/11/30 09:05:56.298 INFO raft_node.rs:457 Raft soft state change, node id 64803, current leader 0    
25/11/30 09:05:56.298 INFO raft.rs:2224 received votes response, raft_id: 64802, term: 1, type: MsgRequestVoteResponse, approvals: 1, rejections: 1, from: 64803, vote: false    
25/11/30 09:05:56.299 INFO raft.rs:1132 became follower at term 1, raft_id: 64802, term: 1    
25/11/30 09:05:56.400 INFO raft_node.rs:457 Raft soft state change, node id 64802, current leader 0    
25/11/30 09:05:57.519 INFO raft.rs:1562 starting a new election, raft_id: 64803, term: 1    
25/11/30 09:05:57.519 INFO raft.rs:1182 became pre-candidate at term 1, raft_id: 64803, term: 1    
25/11/30 09:05:57.519 INFO raft.rs:1311 broadcasting vote request, raft_id: 64803, to: [64802], log_index: 0, log_term: 0, term: 1, type: MsgRequestPreVote    
25/11/30 09:05:57.519 INFO raft_node.rs:457 Raft soft state change, node id 64803, current leader 0    
25/11/30 09:05:57.519 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 64802] cast vote for 64803 [logterm: 0, index: 0] at term 1, raft_id: 64802, msg type: MsgRequestPreVote, term: 1, msg_index: 0, msg_term: 0, from: 64803, vote: 64802, log_index: 0, log_term: 0    
25/11/30 09:05:57.622 INFO raft.rs:2224 received votes response, raft_id: 64803, term: 1, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64802, vote: true    
25/11/30 09:05:57.622 INFO raft.rs:1156 became candidate at term 2, raft_id: 64803, term: 2    
25/11/30 09:05:57.622 INFO raft.rs:1311 broadcasting vote request, raft_id: 64803, to: [64802], log_index: 0, log_term: 0, term: 2, type: MsgRequestVote    
25/11/30 09:05:57.724 INFO raft_node.rs:457 Raft soft state change, node id 64803, current leader 0    
25/11/30 09:05:57.725 INFO raft.rs:1376 received a message with higher term from 64803, raft_id: 64802, msg type: MsgRequestVote, message_term: 2, term: 1, from: 64803    
25/11/30 09:05:57.725 INFO raft.rs:1132 became follower at term 2, raft_id: 64802, term: 2    
25/11/30 09:05:57.725 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64803 [logterm: 0, index: 0] at term 2, raft_id: 64802, msg type: MsgRequestVote, term: 2, msg_index: 0, msg_term: 0, from: 64803, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:05:57.827 INFO raft.rs:2224 received votes response, raft_id: 64803, term: 2, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64802, vote: true    
25/11/30 09:05:57.828 INFO raft.rs:1240 became leader at term 2, raft_id: 64803, term: 2    
25/11/30 09:05:57.930 INFO raft_node.rs:457 Raft soft state change, node id 64803, current leader 64803    
25/11/30 09:05:57.971 INFO journal_test.rs:140 state 1 Standby    
25/11/30 09:05:57.971 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x158843200, 0x157724970, 0x157725930, 0x1577260b0], store: "<InodeStore>" }
inode: 0x1577260b0
complete_file: 1764468357972
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x158843200, 0x157724970, 0x1576176b0], store: "<InodeStore>" }
inode: 0x1576176b0
complete_file: 1764468357972
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x158843200, 0x157724970, 0x1576178b0], store: "<InodeStore>" }
inode: 0x1576178b0
complete_file: 1764468357972
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:05:57.972 WARN cluster_connector.rs:272 Rpc(-7858906639710665724) call failed to active master localhost:64802: Not leader:     
25/11/30 09:05:57.973 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1150943838, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:05:57.973 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 652559934, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:05:58.074 INFO raft_node.rs:457 Raft soft state change, node id 64802, current leader 64803    
25/11/30 09:06:25.412 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1150943838, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:06:26.339 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 652559934, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 33.19s

âœ… Run 6 PASSED
ðŸ“Š Progress: 6 success, 0 fails
----------------------------------------
ðŸ”„ Run 7/100

running 1 test
25/11/30 09:06:28.766 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:06:28.776 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:06:28.777 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:06:28.778 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:06:28.795 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:06:28.796 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:06:28.805 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:06:28.805 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:06:28.806 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:06:28.823 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:06:28.824 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:06:28.824 INFO raft.rs:2668 switched to configuration, raft_id: 64814, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64814, 64815} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:06:28.824 INFO raft.rs:1132 became follower at term 0, raft_id: 64814, term: 0    
25/11/30 09:06:28.824 INFO raft.rs:393 newRaft, raft_id: 64814, peers: Configuration { incoming: Configuration { voters: {64814, 64815} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:06:28.824 INFO raw_node.rs:315 RawNode created with id 64814., raft_id: 64814, id: 64814    
25/11/30 09:06:28.825 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64814, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:06:28.826 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:06:28.826 INFO raft.rs:2668 switched to configuration, raft_id: 64815, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64814, 64815} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:06:28.826 INFO raft.rs:1132 became follower at term 0, raft_id: 64815, term: 0    
25/11/30 09:06:28.826 INFO raft.rs:393 newRaft, raft_id: 64815, peers: Configuration { incoming: Configuration { voters: {64814, 64815} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:06:28.826 INFO raw_node.rs:315 RawNode created with id 64815., raft_id: 64815, id: 64815    
25/11/30 09:06:28.826 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64815, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:06:29.846 INFO raft.rs:1562 starting a new election, raft_id: 64815, term: 0    
25/11/30 09:06:29.846 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64815, term: 0    
25/11/30 09:06:29.846 INFO raft.rs:1311 broadcasting vote request, raft_id: 64815, to: [64814], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:06:29.846 INFO raft_node.rs:457 Raft soft state change, node id 64815, current leader 0    
25/11/30 09:06:29.847 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64815 [logterm: 0, index: 0] at term 0, raft_id: 64814, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64815, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:06:29.951 INFO raft.rs:2224 received votes response, raft_id: 64815, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64814, vote: true    
25/11/30 09:06:29.951 INFO raft.rs:1156 became candidate at term 1, raft_id: 64815, term: 1    
25/11/30 09:06:29.951 INFO raft.rs:1311 broadcasting vote request, raft_id: 64815, to: [64814], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:06:30.053 INFO raft_node.rs:457 Raft soft state change, node id 64815, current leader 0    
25/11/30 09:06:30.053 INFO raft.rs:1376 received a message with higher term from 64815, raft_id: 64814, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64815    
25/11/30 09:06:30.054 INFO raft.rs:1132 became follower at term 1, raft_id: 64814, term: 1    
25/11/30 09:06:30.054 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64815 [logterm: 0, index: 0] at term 1, raft_id: 64814, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64815, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:06:30.156 INFO raft.rs:2224 received votes response, raft_id: 64815, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64814, vote: true    
25/11/30 09:06:30.156 INFO raft.rs:1240 became leader at term 1, raft_id: 64815, term: 1    
25/11/30 09:06:30.257 INFO raft_node.rs:457 Raft soft state change, node id 64815, current leader 64815    
25/11/30 09:06:30.274 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:06:30.274 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x146e58160, 0x15000c680, 0x15000d800, 0x15000df10], store: "<InodeStore>" }
inode: 0x15000df10
complete_file: 1764468390275
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x146e58160, 0x15000c680, 0x15000d410], store: "<InodeStore>" }
inode: 0x15000d410
complete_file: 1764468390276
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x146e58160, 0x15000c680, 0x15000d410], store: "<InodeStore>" }
inode: 0x15000d410
complete_file: 1764468390276
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:06:30.276 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2615296500, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:06:30.277 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 586660809, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:06:30.360 INFO raft_node.rs:457 Raft soft state change, node id 64814, current leader 64815    
25/11/30 09:06:37.771 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2615296500, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:06:38.700 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 586660809, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.52s

âœ… Run 7 PASSED
ðŸ“Š Progress: 7 success, 0 fails
----------------------------------------
ðŸ”„ Run 8/100

running 1 test
25/11/30 09:07:01.035 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:07:01.047 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:07:01.047 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:07:01.048 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:07:01.066 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:07:01.067 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:07:01.077 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:07:01.077 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:07:01.078 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:07:01.095 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:07:01.096 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:07:01.096 INFO raft.rs:2668 switched to configuration, raft_id: 64820, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64820, 64821} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:07:01.096 INFO raft.rs:1132 became follower at term 0, raft_id: 64820, term: 0    
25/11/30 09:07:01.096 INFO raft.rs:393 newRaft, raft_id: 64820, peers: Configuration { incoming: Configuration { voters: {64820, 64821} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:07:01.096 INFO raw_node.rs:315 RawNode created with id 64820., raft_id: 64820, id: 64820    
25/11/30 09:07:01.098 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64820, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:07:01.098 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:07:01.098 INFO raft.rs:2668 switched to configuration, raft_id: 64821, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64820, 64821} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:07:01.098 INFO raft.rs:1132 became follower at term 0, raft_id: 64821, term: 0    
25/11/30 09:07:01.098 INFO raft.rs:393 newRaft, raft_id: 64821, peers: Configuration { incoming: Configuration { voters: {64820, 64821} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:07:01.098 INFO raw_node.rs:315 RawNode created with id 64821., raft_id: 64821, id: 64821    
25/11/30 09:07:01.099 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64821, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:07:03.852 INFO raft.rs:1562 starting a new election, raft_id: 64820, term: 0    
25/11/30 09:07:03.853 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64820, term: 0    
25/11/30 09:07:03.853 INFO raft.rs:1311 broadcasting vote request, raft_id: 64820, to: [64821], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:07:03.853 INFO raft_node.rs:457 Raft soft state change, node id 64820, current leader 0    
25/11/30 09:07:03.854 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64820 [logterm: 0, index: 0] at term 0, raft_id: 64821, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64820, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:07:03.957 INFO raft.rs:2224 received votes response, raft_id: 64820, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64821, vote: true    
25/11/30 09:07:03.958 INFO raft.rs:1156 became candidate at term 1, raft_id: 64820, term: 1    
25/11/30 09:07:03.958 INFO raft.rs:1311 broadcasting vote request, raft_id: 64820, to: [64821], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:07:04.058 INFO raft_node.rs:457 Raft soft state change, node id 64820, current leader 0    
25/11/30 09:07:04.058 INFO raft.rs:1562 starting a new election, raft_id: 64821, term: 0    
25/11/30 09:07:04.059 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64821, term: 0    
25/11/30 09:07:04.059 INFO raft.rs:1311 broadcasting vote request, raft_id: 64821, to: [64820], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:07:04.059 INFO raft_node.rs:457 Raft soft state change, node id 64821, current leader 0    
25/11/30 09:07:04.059 INFO raft.rs:1376 received a message with higher term from 64820, raft_id: 64821, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64820    
25/11/30 09:07:04.059 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64820] rejected vote from 64821 [logterm: 0, index: 0] at term 1, raft_id: 64820, msg type: MsgRequestPreVote, term: 1, msg_index: 0, msg_term: 0, from: 64821, vote: 64820, log_index: 0, log_term: 0    
25/11/30 09:07:04.060 INFO raft.rs:1132 became follower at term 1, raft_id: 64821, term: 1    
25/11/30 09:07:04.060 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64820 [logterm: 0, index: 0] at term 1, raft_id: 64821, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64820, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:07:04.160 INFO raft_node.rs:457 Raft soft state change, node id 64821, current leader 0    
25/11/30 09:07:04.161 INFO raft.rs:2224 received votes response, raft_id: 64820, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64821, vote: true    
25/11/30 09:07:04.161 INFO raft.rs:1240 became leader at term 1, raft_id: 64820, term: 1    
25/11/30 09:07:04.263 INFO raft_node.rs:457 Raft soft state change, node id 64820, current leader 64820    
25/11/30 09:07:04.326 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:07:04.327 INFO journal_test.rs:141 state 2 Standby    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x13d617af0, 0x11d704d70, 0x11d804d30, 0x11d8054c0], store: "<InodeStore>" }
inode: 0x11d8054c0
complete_file: 1764468424329
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:07:04.330 WARN cluster_connector.rs:272 Rpc(-8149983061447114981) call failed to active master localhost:64821: Not leader:     
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13d617af0, 0x11d704d70, 0x11d805270], store: "<InodeStore>" }
inode: 0x11d805270
complete_file: 1764468424330
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13d617af0, 0x11d704d70, 0x11d805270], store: "<InodeStore>" }
inode: 0x11d805270
complete_file: 1764468424331
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:07:04.332 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 872829618, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:07:04.332 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3741561129, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:07:04.432 INFO raft_node.rs:457 Raft soft state change, node id 64821, current leader 64820    
25/11/30 09:07:31.752 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 872829618, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:07:32.681 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3741561129, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 33.31s

âœ… Run 8 PASSED
ðŸ“Š Progress: 8 success, 0 fails
----------------------------------------
ðŸ”„ Run 9/100

running 1 test
25/11/30 09:07:35.119 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:07:35.129 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:07:35.129 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:07:35.130 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:07:35.148 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:07:35.149 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:07:35.158 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:07:35.158 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:07:35.158 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:07:35.176 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:07:35.176 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:07:35.176 INFO raft.rs:2668 switched to configuration, raft_id: 64827, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64828, 64827} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:07:35.177 INFO raft.rs:1132 became follower at term 0, raft_id: 64827, term: 0    
25/11/30 09:07:35.177 INFO raft.rs:393 newRaft, raft_id: 64827, peers: Configuration { incoming: Configuration { voters: {64828, 64827} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:07:35.177 INFO raw_node.rs:315 RawNode created with id 64827., raft_id: 64827, id: 64827    
25/11/30 09:07:35.178 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64827, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:07:35.178 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:07:35.178 INFO raft.rs:2668 switched to configuration, raft_id: 64828, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64828, 64827} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:07:35.178 INFO raft.rs:1132 became follower at term 0, raft_id: 64828, term: 0    
25/11/30 09:07:35.179 INFO raft.rs:393 newRaft, raft_id: 64828, peers: Configuration { incoming: Configuration { voters: {64828, 64827} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:07:35.179 INFO raw_node.rs:315 RawNode created with id 64828., raft_id: 64828, id: 64828    
25/11/30 09:07:35.179 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64828, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:07:36.400 INFO raft.rs:1562 starting a new election, raft_id: 64828, term: 0    
25/11/30 09:07:36.400 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64828, term: 0    
25/11/30 09:07:36.400 INFO raft.rs:1311 broadcasting vote request, raft_id: 64828, to: [64827], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:07:36.400 INFO raft_node.rs:457 Raft soft state change, node id 64828, current leader 0    
25/11/30 09:07:36.401 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64828 [logterm: 0, index: 0] at term 0, raft_id: 64827, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64828, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:07:36.504 INFO raft.rs:2224 received votes response, raft_id: 64828, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64827, vote: true    
25/11/30 09:07:36.504 INFO raft.rs:1156 became candidate at term 1, raft_id: 64828, term: 1    
25/11/30 09:07:36.504 INFO raft.rs:1311 broadcasting vote request, raft_id: 64828, to: [64827], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:07:36.607 INFO raft_node.rs:457 Raft soft state change, node id 64828, current leader 0    
25/11/30 09:07:36.607 INFO raft.rs:1376 received a message with higher term from 64828, raft_id: 64827, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64828    
25/11/30 09:07:36.607 INFO raft.rs:1132 became follower at term 1, raft_id: 64827, term: 1    
25/11/30 09:07:36.607 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64828 [logterm: 0, index: 0] at term 1, raft_id: 64827, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64828, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:07:36.710 INFO raft.rs:2224 received votes response, raft_id: 64828, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64827, vote: true    
25/11/30 09:07:36.710 INFO raft.rs:1240 became leader at term 1, raft_id: 64828, term: 1    
25/11/30 09:07:36.813 INFO raft_node.rs:457 Raft soft state change, node id 64828, current leader 64828    
25/11/30 09:07:36.835 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:07:36.835 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x13690a7a0, 0x1088047b0, 0x1088059d0, 0x108a04ab0], store: "<InodeStore>" }
inode: 0x108a04ab0
complete_file: 1764468456837
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13690a7a0, 0x1088047b0, 0x108a05070], store: "<InodeStore>" }
inode: 0x108a05070
complete_file: 1764468456838
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13690a7a0, 0x1088047b0, 0x108a05000], store: "<InodeStore>" }
inode: 0x108a05000
complete_file: 1764468456839
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:07:36.840 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 4002642520, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:07:36.840 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1258056443, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:07:36.915 INFO raft_node.rs:457 Raft soft state change, node id 64827, current leader 64828    
25/11/30 09:07:44.213 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 4002642520, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:07:45.136 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1258056443, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.73s

âœ… Run 9 PASSED
ðŸ“Š Progress: 9 success, 0 fails
----------------------------------------
ðŸ”„ Run 10/100

running 1 test
25/11/30 09:08:07.575 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:08:07.586 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:08:07.586 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:08:07.587 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:08:07.609 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:08:07.610 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:08:07.620 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:08:07.621 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:08:07.621 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:08:07.640 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:08:07.640 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:08:07.640 INFO raft.rs:2668 switched to configuration, raft_id: 64840, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64840, 64841} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:08:07.640 INFO raft.rs:1132 became follower at term 0, raft_id: 64840, term: 0    
25/11/30 09:08:07.640 INFO raft.rs:393 newRaft, raft_id: 64840, peers: Configuration { incoming: Configuration { voters: {64840, 64841} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:08:07.640 INFO raw_node.rs:315 RawNode created with id 64840., raft_id: 64840, id: 64840    
25/11/30 09:08:07.642 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64840, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:08:07.642 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:08:07.642 INFO raft.rs:2668 switched to configuration, raft_id: 64841, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64840, 64841} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:08:07.642 INFO raft.rs:1132 became follower at term 0, raft_id: 64841, term: 0    
25/11/30 09:08:07.642 INFO raft.rs:393 newRaft, raft_id: 64841, peers: Configuration { incoming: Configuration { voters: {64840, 64841} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:08:07.642 INFO raw_node.rs:315 RawNode created with id 64841., raft_id: 64841, id: 64841    
25/11/30 09:08:07.643 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64841, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:08:09.170 INFO raft.rs:1562 starting a new election, raft_id: 64840, term: 0    
25/11/30 09:08:09.170 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64840, term: 0    
25/11/30 09:08:09.170 INFO raft.rs:1311 broadcasting vote request, raft_id: 64840, to: [64841], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:08:09.170 INFO raft_node.rs:457 Raft soft state change, node id 64840, current leader 0    
25/11/30 09:08:09.171 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64840 [logterm: 0, index: 0] at term 0, raft_id: 64841, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64840, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:08:09.275 INFO raft.rs:2224 received votes response, raft_id: 64840, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64841, vote: true    
25/11/30 09:08:09.275 INFO raft.rs:1156 became candidate at term 1, raft_id: 64840, term: 1    
25/11/30 09:08:09.275 INFO raft.rs:1311 broadcasting vote request, raft_id: 64840, to: [64841], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:08:09.375 INFO raft.rs:1562 starting a new election, raft_id: 64841, term: 0    
25/11/30 09:08:09.375 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64841, term: 0    
25/11/30 09:08:09.375 INFO raft.rs:1311 broadcasting vote request, raft_id: 64841, to: [64840], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:08:09.375 INFO raft_node.rs:457 Raft soft state change, node id 64841, current leader 0    
25/11/30 09:08:09.376 INFO raft_node.rs:457 Raft soft state change, node id 64840, current leader 0    
25/11/30 09:08:09.376 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64840] rejected vote from 64841 [logterm: 0, index: 0] at term 1, raft_id: 64840, msg type: MsgRequestPreVote, term: 1, msg_index: 0, msg_term: 0, from: 64841, vote: 64840, log_index: 0, log_term: 0    
25/11/30 09:08:09.376 INFO raft.rs:1376 received a message with higher term from 64840, raft_id: 64841, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64840    
25/11/30 09:08:09.376 INFO raft.rs:1132 became follower at term 1, raft_id: 64841, term: 1    
25/11/30 09:08:09.376 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64840 [logterm: 0, index: 0] at term 1, raft_id: 64841, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64840, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:08:09.478 INFO raft_node.rs:457 Raft soft state change, node id 64841, current leader 0    
25/11/30 09:08:09.479 INFO raft.rs:2224 received votes response, raft_id: 64840, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64841, vote: true    
25/11/30 09:08:09.479 INFO raft.rs:1240 became leader at term 1, raft_id: 64840, term: 1    
25/11/30 09:08:09.583 INFO raft_node.rs:457 Raft soft state change, node id 64840, current leader 64840    
25/11/30 09:08:09.617 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:08:09.617 INFO journal_test.rs:141 state 2 Standby    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x115615400, 0x106504870, 0x1065051c0, 0x106505080], store: "<InodeStore>" }
inode: 0x106505080
complete_file: 1764468489620
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:08:09.621 WARN cluster_connector.rs:272 Rpc(-7546326067637061737) call failed to active master localhost:64841: Not leader:     
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x115615400, 0x106504870, 0x106505e10], store: "<InodeStore>" }
inode: 0x106505e10
complete_file: 1764468489621
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x115615400, 0x106504870, 0x1065053f0], store: "<InodeStore>" }
inode: 0x1065053f0
complete_file: 1764468489622
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:08:09.623 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3024636258, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:08:09.624 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3761469857, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:08:09.723 INFO raft_node.rs:457 Raft soft state change, node id 64841, current leader 64840    
25/11/30 09:08:36.924 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3024636258, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:08:37.849 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3761469857, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.06s

âœ… Run 10 PASSED
ðŸ“Š Progress: 10 success, 0 fails
----------------------------------------
ðŸ”„ Run 11/100

running 1 test
25/11/30 09:08:40.544 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:08:40.555 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:08:40.555 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:08:40.556 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:08:40.574 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:08:40.575 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:08:40.585 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:08:40.585 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:08:40.586 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:08:40.604 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:08:40.604 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:08:40.604 INFO raft.rs:2668 switched to configuration, raft_id: 64854, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64854, 64855} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:08:40.605 INFO raft.rs:1132 became follower at term 0, raft_id: 64854, term: 0    
25/11/30 09:08:40.605 INFO raft.rs:393 newRaft, raft_id: 64854, peers: Configuration { incoming: Configuration { voters: {64854, 64855} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:08:40.605 INFO raw_node.rs:315 RawNode created with id 64854., raft_id: 64854, id: 64854    
25/11/30 09:08:40.606 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64854, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:08:40.606 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:08:40.607 INFO raft.rs:2668 switched to configuration, raft_id: 64855, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64854, 64855} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:08:40.607 INFO raft.rs:1132 became follower at term 0, raft_id: 64855, term: 0    
25/11/30 09:08:40.607 INFO raft.rs:393 newRaft, raft_id: 64855, peers: Configuration { incoming: Configuration { voters: {64854, 64855} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:08:40.607 INFO raw_node.rs:315 RawNode created with id 64855., raft_id: 64855, id: 64855    
25/11/30 09:08:40.607 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64855, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:08:41.729 INFO raft.rs:1562 starting a new election, raft_id: 64854, term: 0    
25/11/30 09:08:41.730 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64854, term: 0    
25/11/30 09:08:41.730 INFO raft.rs:1311 broadcasting vote request, raft_id: 64854, to: [64855], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:08:41.730 INFO raft_node.rs:457 Raft soft state change, node id 64854, current leader 0    
25/11/30 09:08:41.731 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64854 [logterm: 0, index: 0] at term 0, raft_id: 64855, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64854, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:08:41.834 INFO raft.rs:2224 received votes response, raft_id: 64854, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64855, vote: true    
25/11/30 09:08:41.834 INFO raft.rs:1156 became candidate at term 1, raft_id: 64854, term: 1    
25/11/30 09:08:41.834 INFO raft.rs:1311 broadcasting vote request, raft_id: 64854, to: [64855], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:08:41.937 INFO raft_node.rs:457 Raft soft state change, node id 64854, current leader 0    
25/11/30 09:08:41.937 INFO raft.rs:1376 received a message with higher term from 64854, raft_id: 64855, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64854    
25/11/30 09:08:41.937 INFO raft.rs:1132 became follower at term 1, raft_id: 64855, term: 1    
25/11/30 09:08:41.937 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64854 [logterm: 0, index: 0] at term 1, raft_id: 64855, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64854, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:08:42.040 INFO raft.rs:2224 received votes response, raft_id: 64854, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64855, vote: true    
25/11/30 09:08:42.040 INFO raft.rs:1240 became leader at term 1, raft_id: 64854, term: 1    
25/11/30 09:08:42.142 INFO raft_node.rs:457 Raft soft state change, node id 64854, current leader 64854    
25/11/30 09:08:42.149 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:08:42.149 INFO journal_test.rs:141 state 2 Exit    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x11e6361b0, 0x11e71ddc0, 0x11e71eec0, 0x11e71e990], store: "<InodeStore>" }
inode: 0x11e71e990
complete_file: 1764468522150
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x11e6361b0, 0x11e71ddc0, 0x11e71ead0], store: "<InodeStore>" }
inode: 0x11e71ead0
complete_file: 1764468522150
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x11e6361b0, 0x11e71ddc0, 0x11e6506c0], store: "<InodeStore>" }
inode: 0x11e6506c0
complete_file: 1764468522150
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:08:42.150 WARN cluster_connector.rs:272 Rpc(-5694632022544792658) call failed to active master localhost:64855: Not leader:     
25/11/30 09:08:42.151 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3311859816, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:08:42.151 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3458569692, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:08:42.253 INFO raft_node.rs:457 Raft soft state change, node id 64855, current leader 64854    
25/11/30 09:09:09.468 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3311859816, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:09:10.494 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3458569692, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.62s

âœ… Run 11 PASSED
ðŸ“Š Progress: 11 success, 0 fails
----------------------------------------
ðŸ”„ Run 12/100

running 1 test
25/11/30 09:09:12.854 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:09:12.866 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:09:12.866 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:09:12.867 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:09:12.886 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:09:12.887 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:09:12.899 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:09:12.899 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:09:12.900 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:09:12.919 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:09:12.919 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:09:12.920 INFO raft.rs:2668 switched to configuration, raft_id: 64860, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64860, 64861} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:09:12.920 INFO raft.rs:1132 became follower at term 0, raft_id: 64860, term: 0    
25/11/30 09:09:12.920 INFO raft.rs:393 newRaft, raft_id: 64860, peers: Configuration { incoming: Configuration { voters: {64860, 64861} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:09:12.920 INFO raw_node.rs:315 RawNode created with id 64860., raft_id: 64860, id: 64860    
25/11/30 09:09:12.922 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64860, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:09:12.922 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:09:12.922 INFO raft.rs:2668 switched to configuration, raft_id: 64861, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64860, 64861} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:09:12.922 INFO raft.rs:1132 became follower at term 0, raft_id: 64861, term: 0    
25/11/30 09:09:12.922 INFO raft.rs:393 newRaft, raft_id: 64861, peers: Configuration { incoming: Configuration { voters: {64860, 64861} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:09:12.922 INFO raw_node.rs:315 RawNode created with id 64861., raft_id: 64861, id: 64861    
25/11/30 09:09:12.923 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64861, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:09:14.756 INFO raft.rs:1562 starting a new election, raft_id: 64861, term: 0    
25/11/30 09:09:14.756 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64861, term: 0    
25/11/30 09:09:14.756 INFO raft.rs:1311 broadcasting vote request, raft_id: 64861, to: [64860], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:09:14.757 INFO raft_node.rs:457 Raft soft state change, node id 64861, current leader 0    
25/11/30 09:09:14.758 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64861 [logterm: 0, index: 0] at term 0, raft_id: 64860, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64861, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:09:14.860 INFO raft.rs:2224 received votes response, raft_id: 64861, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64860, vote: true    
25/11/30 09:09:14.860 INFO raft.rs:1156 became candidate at term 1, raft_id: 64861, term: 1    
25/11/30 09:09:14.860 INFO raft.rs:1311 broadcasting vote request, raft_id: 64861, to: [64860], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:09:14.962 INFO raft_node.rs:457 Raft soft state change, node id 64861, current leader 0    
25/11/30 09:09:14.962 INFO raft.rs:1562 starting a new election, raft_id: 64860, term: 0    
25/11/30 09:09:14.962 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64860, term: 0    
25/11/30 09:09:14.962 INFO raft.rs:1311 broadcasting vote request, raft_id: 64860, to: [64861], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:09:14.962 INFO raft_node.rs:457 Raft soft state change, node id 64860, current leader 0    
25/11/30 09:09:14.962 INFO raft.rs:1376 received a message with higher term from 64861, raft_id: 64860, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64861    
25/11/30 09:09:14.962 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64861] rejected vote from 64860 [logterm: 0, index: 0] at term 1, raft_id: 64861, msg type: MsgRequestPreVote, term: 1, msg_index: 0, msg_term: 0, from: 64860, vote: 64861, log_index: 0, log_term: 0    
25/11/30 09:09:14.962 INFO raft.rs:1132 became follower at term 1, raft_id: 64860, term: 1    
25/11/30 09:09:14.962 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64861 [logterm: 0, index: 0] at term 1, raft_id: 64860, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64861, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:09:15.064 INFO raft_node.rs:457 Raft soft state change, node id 64860, current leader 0    
25/11/30 09:09:15.065 INFO raft.rs:2224 received votes response, raft_id: 64861, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64860, vote: true    
25/11/30 09:09:15.065 INFO raft.rs:1240 became leader at term 1, raft_id: 64861, term: 1    
25/11/30 09:09:15.167 INFO raft_node.rs:457 Raft soft state change, node id 64861, current leader 64861    
25/11/30 09:09:15.196 INFO journal_test.rs:140 state 1 Standby    
25/11/30 09:09:15.196 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x122607480, 0x12382c010, 0x12382cfd0, 0x12382d110], store: "<InodeStore>" }
inode: 0x12382d110
complete_file: 1764468555197
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x122607480, 0x12382c010, 0x122612a00], store: "<InodeStore>" }
inode: 0x122612a00
complete_file: 1764468555197
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x122607480, 0x12382c010, 0x122612a00], store: "<InodeStore>" }
inode: 0x122612a00
complete_file: 1764468555198
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:09:15.198 WARN cluster_connector.rs:272 Rpc(-5293357076419974047) call failed to active master localhost:64860: Not leader:     
25/11/30 09:09:15.198 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3109809309, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:09:15.198 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2572263824, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:09:15.300 INFO raft_node.rs:457 Raft soft state change, node id 64860, current leader 64861    
25/11/30 09:09:42.605 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3109809309, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:09:43.532 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2572263824, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.35s

âœ… Run 12 PASSED
ðŸ“Š Progress: 12 success, 0 fails
----------------------------------------
ðŸ”„ Run 13/100

running 1 test
25/11/30 09:09:46.082 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:09:46.094 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:09:46.094 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:09:46.095 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:09:46.113 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:09:46.114 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:09:46.125 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:09:46.125 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:09:46.126 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:09:46.145 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:09:46.145 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:09:46.145 INFO raft.rs:2668 switched to configuration, raft_id: 64867, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64868, 64867} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:09:46.145 INFO raft.rs:1132 became follower at term 0, raft_id: 64867, term: 0    
25/11/30 09:09:46.145 INFO raft.rs:393 newRaft, raft_id: 64867, peers: Configuration { incoming: Configuration { voters: {64868, 64867} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:09:46.146 INFO raw_node.rs:315 RawNode created with id 64867., raft_id: 64867, id: 64867    
25/11/30 09:09:46.147 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64867, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:09:46.148 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:09:46.148 INFO raft.rs:2668 switched to configuration, raft_id: 64868, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64868, 64867} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:09:46.148 INFO raft.rs:1132 became follower at term 0, raft_id: 64868, term: 0    
25/11/30 09:09:46.148 INFO raft.rs:393 newRaft, raft_id: 64868, peers: Configuration { incoming: Configuration { voters: {64868, 64867} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:09:46.148 INFO raw_node.rs:315 RawNode created with id 64868., raft_id: 64868, id: 64868    
25/11/30 09:09:46.148 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64868, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:09:47.169 INFO raft.rs:1562 starting a new election, raft_id: 64867, term: 0    
25/11/30 09:09:47.169 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64867, term: 0    
25/11/30 09:09:47.169 INFO raft.rs:1311 broadcasting vote request, raft_id: 64867, to: [64868], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:09:47.169 INFO raft_node.rs:457 Raft soft state change, node id 64867, current leader 0    
25/11/30 09:09:47.170 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64867 [logterm: 0, index: 0] at term 0, raft_id: 64868, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64867, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:09:47.273 INFO raft.rs:2224 received votes response, raft_id: 64867, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64868, vote: true    
25/11/30 09:09:47.273 INFO raft.rs:1156 became candidate at term 1, raft_id: 64867, term: 1    
25/11/30 09:09:47.274 INFO raft.rs:1311 broadcasting vote request, raft_id: 64867, to: [64868], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:09:47.376 INFO raft_node.rs:457 Raft soft state change, node id 64867, current leader 0    
25/11/30 09:09:47.376 INFO raft.rs:1376 received a message with higher term from 64867, raft_id: 64868, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64867    
25/11/30 09:09:47.376 INFO raft.rs:1132 became follower at term 1, raft_id: 64868, term: 1    
25/11/30 09:09:47.376 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64867 [logterm: 0, index: 0] at term 1, raft_id: 64868, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64867, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:09:47.479 INFO raft.rs:2224 received votes response, raft_id: 64867, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64868, vote: true    
25/11/30 09:09:47.479 INFO raft.rs:1240 became leader at term 1, raft_id: 64867, term: 1    
25/11/30 09:09:47.581 INFO raft_node.rs:457 Raft soft state change, node id 64867, current leader 64867    
25/11/30 09:09:47.605 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:09:47.605 INFO journal_test.rs:141 state 2 Exit    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x14a616e70, 0x14a73e9f0, 0x14a73faf0, 0x14a740210], store: "<InodeStore>" }
inode: 0x14a740210
complete_file: 1764468587606
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14a616e70, 0x14a73e9f0, 0x14a624c60], store: "<InodeStore>" }
inode: 0x14a624c60
complete_file: 1764468587607
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14a616e70, 0x14a73e9f0, 0x14a624c60], store: "<InodeStore>" }
inode: 0x14a624c60
complete_file: 1764468587607
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:09:47.607 WARN cluster_connector.rs:272 Rpc(-7864261491586788395) call failed to active master localhost:64868: Not leader:     
25/11/30 09:09:47.607 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1997900816, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:09:47.608 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 4202689365, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:09:47.709 INFO raft_node.rs:457 Raft soft state change, node id 64868, current leader 64867    
25/11/30 09:10:14.995 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1997900816, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:10:15.918 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 4202689365, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.53s

âœ… Run 13 PASSED
ðŸ“Š Progress: 13 success, 0 fails
----------------------------------------
ðŸ”„ Run 14/100

running 1 test
25/11/30 09:10:18.319 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:10:18.331 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:10:18.331 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:10:18.332 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:10:18.350 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:10:18.352 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:10:18.361 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:10:18.361 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:10:18.362 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:10:18.380 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:10:18.380 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:10:18.380 INFO raft.rs:2668 switched to configuration, raft_id: 64874, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64874, 64875} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:10:18.380 INFO raft.rs:1132 became follower at term 0, raft_id: 64874, term: 0    
25/11/30 09:10:18.380 INFO raft.rs:393 newRaft, raft_id: 64874, peers: Configuration { incoming: Configuration { voters: {64874, 64875} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:10:18.380 INFO raw_node.rs:315 RawNode created with id 64874., raft_id: 64874, id: 64874    
25/11/30 09:10:18.382 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64874, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:10:18.382 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:10:18.382 INFO raft.rs:2668 switched to configuration, raft_id: 64875, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64874, 64875} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:10:18.382 INFO raft.rs:1132 became follower at term 0, raft_id: 64875, term: 0    
25/11/30 09:10:18.382 INFO raft.rs:393 newRaft, raft_id: 64875, peers: Configuration { incoming: Configuration { voters: {64874, 64875} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:10:18.382 INFO raw_node.rs:315 RawNode created with id 64875., raft_id: 64875, id: 64875    
25/11/30 09:10:18.382 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64875, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:10:19.402 INFO raft.rs:1562 starting a new election, raft_id: 64875, term: 0    
25/11/30 09:10:19.402 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64875, term: 0    
25/11/30 09:10:19.402 INFO raft.rs:1311 broadcasting vote request, raft_id: 64875, to: [64874], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:10:19.402 INFO raft_node.rs:457 Raft soft state change, node id 64875, current leader 0    
25/11/30 09:10:19.403 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64875 [logterm: 0, index: 0] at term 0, raft_id: 64874, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64875, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:10:19.507 INFO raft.rs:2224 received votes response, raft_id: 64875, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64874, vote: true    
25/11/30 09:10:19.507 INFO raft.rs:1156 became candidate at term 1, raft_id: 64875, term: 1    
25/11/30 09:10:19.507 INFO raft.rs:1311 broadcasting vote request, raft_id: 64875, to: [64874], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:10:19.610 INFO raft_node.rs:457 Raft soft state change, node id 64875, current leader 0    
25/11/30 09:10:19.610 INFO raft.rs:1376 received a message with higher term from 64875, raft_id: 64874, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64875    
25/11/30 09:10:19.610 INFO raft.rs:1132 became follower at term 1, raft_id: 64874, term: 1    
25/11/30 09:10:19.610 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64875 [logterm: 0, index: 0] at term 1, raft_id: 64874, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64875, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:10:19.712 INFO raft.rs:2224 received votes response, raft_id: 64875, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64874, vote: true    
25/11/30 09:10:19.713 INFO raft.rs:1240 became leader at term 1, raft_id: 64875, term: 1    
25/11/30 09:10:19.814 INFO raft_node.rs:457 Raft soft state change, node id 64875, current leader 64875    
25/11/30 09:10:19.917 INFO raft_node.rs:457 Raft soft state change, node id 64874, current leader 64875    
25/11/30 09:10:19.919 INFO journal_test.rs:140 state 1 Standby    
25/11/30 09:10:19.919 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x147f2ae80, 0x147f3bb60, 0x147f3cc60, 0x147f3d290], store: "<InodeStore>" }
inode: 0x147f3d290
complete_file: 1764468619920
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x147f2ae80, 0x147f3bb60, 0x147f3c870], store: "<InodeStore>" }
inode: 0x147f3c870
complete_file: 1764468619920
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x147f2ae80, 0x147f3bb60, 0x147f3c870], store: "<InodeStore>" }
inode: 0x147f3c870
complete_file: 1764468619920
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:10:19.921 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2086437485, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:10:19.921 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2704125676, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:10:27.329 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2086437485, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:10:28.254 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2704125676, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.61s

âœ… Run 14 PASSED
ðŸ“Š Progress: 14 success, 0 fails
----------------------------------------
ðŸ”„ Run 15/100

running 1 test
25/11/30 09:10:50.762 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:10:50.774 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:10:50.774 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:10:50.775 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:10:50.792 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:10:50.794 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:10:50.803 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:10:50.803 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:10:50.804 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:10:50.822 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:10:50.822 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:10:50.822 INFO raft.rs:2668 switched to configuration, raft_id: 64881, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64881, 64882} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:10:50.822 INFO raft.rs:1132 became follower at term 0, raft_id: 64881, term: 0    
25/11/30 09:10:50.822 INFO raft.rs:393 newRaft, raft_id: 64881, peers: Configuration { incoming: Configuration { voters: {64881, 64882} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:10:50.822 INFO raw_node.rs:315 RawNode created with id 64881., raft_id: 64881, id: 64881    
25/11/30 09:10:50.824 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64881, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:10:50.824 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:10:50.824 INFO raft.rs:2668 switched to configuration, raft_id: 64882, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64881, 64882} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:10:50.824 INFO raft.rs:1132 became follower at term 0, raft_id: 64882, term: 0    
25/11/30 09:10:50.824 INFO raft.rs:393 newRaft, raft_id: 64882, peers: Configuration { incoming: Configuration { voters: {64881, 64882} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:10:50.824 INFO raw_node.rs:315 RawNode created with id 64882., raft_id: 64882, id: 64882    
25/11/30 09:10:50.825 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64882, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:10:52.557 INFO raft.rs:1562 starting a new election, raft_id: 64882, term: 0    
25/11/30 09:10:52.558 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64882, term: 0    
25/11/30 09:10:52.558 INFO raft.rs:1311 broadcasting vote request, raft_id: 64882, to: [64881], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:10:52.558 INFO raft_node.rs:457 Raft soft state change, node id 64882, current leader 0    
25/11/30 09:10:52.560 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64882 [logterm: 0, index: 0] at term 0, raft_id: 64881, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64882, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:10:52.664 INFO raft.rs:2224 received votes response, raft_id: 64882, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64881, vote: true    
25/11/30 09:10:52.664 INFO raft.rs:1156 became candidate at term 1, raft_id: 64882, term: 1    
25/11/30 09:10:52.665 INFO raft.rs:1311 broadcasting vote request, raft_id: 64882, to: [64881], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:10:52.767 INFO raft_node.rs:457 Raft soft state change, node id 64882, current leader 0    
25/11/30 09:10:52.768 INFO raft.rs:1376 received a message with higher term from 64882, raft_id: 64881, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64882    
25/11/30 09:10:52.769 INFO raft.rs:1132 became follower at term 1, raft_id: 64881, term: 1    
25/11/30 09:10:52.769 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64882 [logterm: 0, index: 0] at term 1, raft_id: 64881, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64882, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:10:52.871 INFO raft.rs:2224 received votes response, raft_id: 64882, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64881, vote: true    
25/11/30 09:10:52.871 INFO raft.rs:1240 became leader at term 1, raft_id: 64882, term: 1    
25/11/30 09:10:52.973 INFO raft_node.rs:457 Raft soft state change, node id 64882, current leader 64882    
25/11/30 09:10:53.002 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:10:53.003 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x130e419d0, 0x110f052b0, 0x110f06100, 0x110e04d50], store: "<InodeStore>" }
inode: 0x110e04d50
complete_file: 1764468653006
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x130e419d0, 0x110f052b0, 0x110e053a0], store: "<InodeStore>" }
inode: 0x110e053a0
complete_file: 1764468653007
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x130e419d0, 0x110f052b0, 0x110e053a0], store: "<InodeStore>" }
inode: 0x110e053a0
complete_file: 1764468653007
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:10:53.008 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1604159484, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:10:53.008 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1361165351, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:10:53.077 INFO raft_node.rs:457 Raft soft state change, node id 64881, current leader 64882    
25/11/30 09:11:00.464 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1604159484, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:11:01.391 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1361165351, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.25s

âœ… Run 15 PASSED
ðŸ“Š Progress: 15 success, 0 fails
----------------------------------------
ðŸ”„ Run 16/100

running 1 test
25/11/30 09:11:23.802 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:11:23.822 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:11:23.823 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:11:23.824 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:11:23.847 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:11:23.849 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:11:23.862 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:11:23.863 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:11:23.864 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:11:23.895 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:11:23.895 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:11:23.896 INFO raft.rs:2668 switched to configuration, raft_id: 64886, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64886, 64887} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:11:23.896 INFO raft.rs:1132 became follower at term 0, raft_id: 64886, term: 0    
25/11/30 09:11:23.896 INFO raft.rs:393 newRaft, raft_id: 64886, peers: Configuration { incoming: Configuration { voters: {64886, 64887} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:11:23.896 INFO raw_node.rs:315 RawNode created with id 64886., raft_id: 64886, id: 64886    
25/11/30 09:11:23.898 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64886, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:11:23.898 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:11:23.898 INFO raft.rs:2668 switched to configuration, raft_id: 64887, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64886, 64887} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:11:23.898 INFO raft.rs:1132 became follower at term 0, raft_id: 64887, term: 0    
25/11/30 09:11:23.898 INFO raft.rs:393 newRaft, raft_id: 64887, peers: Configuration { incoming: Configuration { voters: {64886, 64887} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:11:23.898 INFO raw_node.rs:315 RawNode created with id 64887., raft_id: 64887, id: 64887    
25/11/30 09:11:23.899 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64887, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:11:25.149 INFO raft.rs:1562 starting a new election, raft_id: 64886, term: 0    
25/11/30 09:11:25.150 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64886, term: 0    
25/11/30 09:11:25.150 INFO raft.rs:1311 broadcasting vote request, raft_id: 64886, to: [64887], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:11:25.150 INFO raft_node.rs:457 Raft soft state change, node id 64886, current leader 0    
25/11/30 09:11:25.161 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64886 [logterm: 0, index: 0] at term 0, raft_id: 64887, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64886, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:11:25.264 INFO raft.rs:2224 received votes response, raft_id: 64886, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64887, vote: true    
25/11/30 09:11:25.265 INFO raft.rs:1156 became candidate at term 1, raft_id: 64886, term: 1    
25/11/30 09:11:25.265 INFO raft.rs:1311 broadcasting vote request, raft_id: 64886, to: [64887], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:11:25.367 INFO raft_node.rs:457 Raft soft state change, node id 64886, current leader 0    
25/11/30 09:11:25.368 INFO raft.rs:1376 received a message with higher term from 64886, raft_id: 64887, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64886    
25/11/30 09:11:25.368 INFO raft.rs:1132 became follower at term 1, raft_id: 64887, term: 1    
25/11/30 09:11:25.368 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64886 [logterm: 0, index: 0] at term 1, raft_id: 64887, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64886, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:11:25.471 INFO raft.rs:2224 received votes response, raft_id: 64886, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64887, vote: true    
25/11/30 09:11:25.471 INFO raft.rs:1240 became leader at term 1, raft_id: 64886, term: 1    
25/11/30 09:11:25.573 INFO raft_node.rs:457 Raft soft state change, node id 64886, current leader 64886    
25/11/30 09:11:25.673 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:11:25.673 INFO journal_test.rs:141 state 2 Exit    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x13970b8d0, 0x13a40ab60, 0x13a208d70, 0x13a507720], store: "<InodeStore>" }
inode: 0x13a507720
complete_file: 1764468685675
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:11:25.675 INFO raft_node.rs:457 Raft soft state change, node id 64887, current leader 64886    
25/11/30 09:11:25.676 WARN cluster_connector.rs:272 Rpc(-8307814886129050065) call failed to active master localhost:64887: Not leader:     
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13970b8d0, 0x13a40ab60, 0x13a30c640], store: "<InodeStore>" }
inode: 0x13a30c640
complete_file: 1764468685676
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13970b8d0, 0x13a40ab60, 0x13a30c880], store: "<InodeStore>" }
inode: 0x13a30c880
complete_file: 1764468685676
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:11:25.677 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1624397621, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:11:25.678 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2168094900, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:11:53.086 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1624397621, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:11:54.011 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2168094900, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.90s

âœ… Run 16 PASSED
ðŸ“Š Progress: 16 success, 0 fails
----------------------------------------
ðŸ”„ Run 17/100

running 1 test
25/11/30 09:11:56.460 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:11:56.470 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:11:56.471 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:11:56.471 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:11:56.488 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:11:56.490 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:11:56.499 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:11:56.499 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:11:56.500 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:11:56.517 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:11:56.517 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:11:56.518 INFO raft.rs:2668 switched to configuration, raft_id: 64898, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64898, 64899} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:11:56.518 INFO raft.rs:1132 became follower at term 0, raft_id: 64898, term: 0    
25/11/30 09:11:56.518 INFO raft.rs:393 newRaft, raft_id: 64898, peers: Configuration { incoming: Configuration { voters: {64898, 64899} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:11:56.518 INFO raw_node.rs:315 RawNode created with id 64898., raft_id: 64898, id: 64898    
25/11/30 09:11:56.519 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64898, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:11:56.519 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:11:56.520 INFO raft.rs:2668 switched to configuration, raft_id: 64899, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64898, 64899} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:11:56.520 INFO raft.rs:1132 became follower at term 0, raft_id: 64899, term: 0    
25/11/30 09:11:56.520 INFO raft.rs:393 newRaft, raft_id: 64899, peers: Configuration { incoming: Configuration { voters: {64898, 64899} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:11:56.520 INFO raw_node.rs:315 RawNode created with id 64899., raft_id: 64899, id: 64899    
25/11/30 09:11:56.520 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64899, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:11:57.843 INFO raft.rs:1562 starting a new election, raft_id: 64898, term: 0    
25/11/30 09:11:57.844 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64898, term: 0    
25/11/30 09:11:57.844 INFO raft.rs:1311 broadcasting vote request, raft_id: 64898, to: [64899], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:11:57.844 INFO raft_node.rs:457 Raft soft state change, node id 64898, current leader 0    
25/11/30 09:11:57.845 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64898 [logterm: 0, index: 0] at term 0, raft_id: 64899, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64898, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:11:57.949 INFO raft.rs:2224 received votes response, raft_id: 64898, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64899, vote: true    
25/11/30 09:11:57.949 INFO raft.rs:1156 became candidate at term 1, raft_id: 64898, term: 1    
25/11/30 09:11:57.949 INFO raft.rs:1311 broadcasting vote request, raft_id: 64898, to: [64899], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:11:58.049 INFO raft.rs:1562 starting a new election, raft_id: 64899, term: 0    
25/11/30 09:11:58.050 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64899, term: 0    
25/11/30 09:11:58.050 INFO raft.rs:1311 broadcasting vote request, raft_id: 64899, to: [64898], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:11:58.050 INFO raft_node.rs:457 Raft soft state change, node id 64899, current leader 0    
25/11/30 09:11:58.051 INFO raft_node.rs:457 Raft soft state change, node id 64898, current leader 0    
25/11/30 09:11:58.051 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64898] rejected vote from 64899 [logterm: 0, index: 0] at term 1, raft_id: 64898, msg type: MsgRequestPreVote, term: 1, msg_index: 0, msg_term: 0, from: 64899, vote: 64898, log_index: 0, log_term: 0    
25/11/30 09:11:58.051 INFO raft.rs:1376 received a message with higher term from 64898, raft_id: 64899, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64898    
25/11/30 09:11:58.052 INFO raft.rs:1132 became follower at term 1, raft_id: 64899, term: 1    
25/11/30 09:11:58.052 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64898 [logterm: 0, index: 0] at term 1, raft_id: 64899, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64898, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:11:58.154 INFO raft_node.rs:457 Raft soft state change, node id 64899, current leader 0    
25/11/30 09:11:58.154 INFO raft.rs:2224 received votes response, raft_id: 64898, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64899, vote: true    
25/11/30 09:11:58.155 INFO raft.rs:1240 became leader at term 1, raft_id: 64898, term: 1    
25/11/30 09:11:58.257 INFO raft_node.rs:457 Raft soft state change, node id 64898, current leader 64898    
25/11/30 09:11:58.264 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:11:58.264 INFO journal_test.rs:141 state 2 Standby    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x121811f50, 0x108c05340, 0x108c061f0, 0x10da04b30], store: "<InodeStore>" }
inode: 0x10da04b30
complete_file: 1764468718267
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:11:58.267 WARN cluster_connector.rs:272 Rpc(-8329324853827047383) call failed to active master localhost:64899: Not leader:     
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x121811f50, 0x108c05340, 0x10d904c00], store: "<InodeStore>" }
inode: 0x10d904c00
complete_file: 1764468718268
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x121811f50, 0x108c05340, 0x10d904e60], store: "<InodeStore>" }
inode: 0x10d904e60
complete_file: 1764468718268
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:11:58.269 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 442645120, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:11:58.270 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 794170161, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:11:58.369 INFO raft_node.rs:457 Raft soft state change, node id 64899, current leader 64898    
25/11/30 09:12:25.695 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 442645120, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:12:26.619 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 794170161, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.82s

âœ… Run 17 PASSED
ðŸ“Š Progress: 17 success, 0 fails
----------------------------------------
ðŸ”„ Run 18/100

running 1 test
25/11/30 09:12:29.012 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:12:29.022 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:12:29.023 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:12:29.023 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:12:29.041 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:12:29.042 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:12:29.051 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:12:29.051 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:12:29.052 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:12:29.069 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:12:29.070 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:12:29.070 INFO raft.rs:2668 switched to configuration, raft_id: 64904, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64904, 64905} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:12:29.070 INFO raft.rs:1132 became follower at term 0, raft_id: 64904, term: 0    
25/11/30 09:12:29.070 INFO raft.rs:393 newRaft, raft_id: 64904, peers: Configuration { incoming: Configuration { voters: {64904, 64905} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:12:29.070 INFO raw_node.rs:315 RawNode created with id 64904., raft_id: 64904, id: 64904    
25/11/30 09:12:29.072 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64904, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:12:29.072 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:12:29.072 INFO raft.rs:2668 switched to configuration, raft_id: 64905, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64904, 64905} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:12:29.072 INFO raft.rs:1132 became follower at term 0, raft_id: 64905, term: 0    
25/11/30 09:12:29.072 INFO raft.rs:393 newRaft, raft_id: 64905, peers: Configuration { incoming: Configuration { voters: {64904, 64905} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:12:29.072 INFO raw_node.rs:315 RawNode created with id 64905., raft_id: 64905, id: 64905    
25/11/30 09:12:29.072 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64905, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:12:31.108 INFO raft.rs:1562 starting a new election, raft_id: 64905, term: 0    
25/11/30 09:12:31.109 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64905, term: 0    
25/11/30 09:12:31.109 INFO raft.rs:1311 broadcasting vote request, raft_id: 64905, to: [64904], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:12:31.109 INFO raft_node.rs:457 Raft soft state change, node id 64905, current leader 0    
25/11/30 09:12:31.112 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64905 [logterm: 0, index: 0] at term 0, raft_id: 64904, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64905, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:12:31.216 INFO raft.rs:2224 received votes response, raft_id: 64905, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64904, vote: true    
25/11/30 09:12:31.217 INFO raft.rs:1156 became candidate at term 1, raft_id: 64905, term: 1    
25/11/30 09:12:31.217 INFO raft.rs:1311 broadcasting vote request, raft_id: 64905, to: [64904], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:12:31.316 INFO raft.rs:1562 starting a new election, raft_id: 64904, term: 0    
25/11/30 09:12:31.316 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64904, term: 0    
25/11/30 09:12:31.316 INFO raft.rs:1311 broadcasting vote request, raft_id: 64904, to: [64905], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:12:31.316 INFO raft_node.rs:457 Raft soft state change, node id 64904, current leader 0    
25/11/30 09:12:31.317 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64905] rejected vote from 64904 [logterm: 0, index: 0] at term 1, raft_id: 64905, msg type: MsgRequestPreVote, term: 1, msg_index: 0, msg_term: 0, from: 64904, vote: 64905, log_index: 0, log_term: 0    
25/11/30 09:12:31.418 INFO raft_node.rs:457 Raft soft state change, node id 64905, current leader 0    
25/11/30 09:12:31.419 INFO raft.rs:1376 received a message with higher term from 64905, raft_id: 64904, msg type: MsgRequestPreVoteResponse, message_term: 1, term: 0, from: 64905    
25/11/30 09:12:31.419 INFO raft.rs:1132 became follower at term 1, raft_id: 64904, term: 1    
25/11/30 09:12:31.419 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64905 [logterm: 0, index: 0] at term 1, raft_id: 64904, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64905, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:12:31.520 INFO raft_node.rs:457 Raft soft state change, node id 64904, current leader 0    
25/11/30 09:12:31.521 INFO raft.rs:2224 received votes response, raft_id: 64905, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64904, vote: true    
25/11/30 09:12:31.522 INFO raft.rs:1240 became leader at term 1, raft_id: 64905, term: 1    
25/11/30 09:12:31.624 INFO raft_node.rs:457 Raft soft state change, node id 64905, current leader 64905    
25/11/30 09:12:31.646 INFO journal_test.rs:140 state 1 Standby    
25/11/30 09:12:31.646 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x14664d260, 0x1167056c0, 0x116606660, 0x116606120], store: "<InodeStore>" }
inode: 0x116606120
complete_file: 1764468751648
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14664d260, 0x1167056c0, 0x1166064f0], store: "<InodeStore>" }
inode: 0x1166064f0
complete_file: 1764468751649
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14664d260, 0x1167056c0, 0x1166064f0], store: "<InodeStore>" }
inode: 0x1166064f0
complete_file: 1764468751650
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:12:31.651 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2313200121, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:12:31.652 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 667828105, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:12:31.729 INFO raft_node.rs:457 Raft soft state change, node id 64904, current leader 64905    
25/11/30 09:12:39.039 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2313200121, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:12:39.967 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 667828105, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.65s

âœ… Run 18 PASSED
ðŸ“Š Progress: 18 success, 0 fails
----------------------------------------
ðŸ”„ Run 19/100

running 1 test
25/11/30 09:13:02.413 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:13:02.423 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:13:02.423 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:13:02.424 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:13:02.442 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:13:02.443 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:13:02.452 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:13:02.452 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:13:02.453 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:13:02.470 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:13:02.471 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:13:02.471 INFO raft.rs:2668 switched to configuration, raft_id: 64910, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64910, 64911} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:13:02.471 INFO raft.rs:1132 became follower at term 0, raft_id: 64910, term: 0    
25/11/30 09:13:02.471 INFO raft.rs:393 newRaft, raft_id: 64910, peers: Configuration { incoming: Configuration { voters: {64910, 64911} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:13:02.471 INFO raw_node.rs:315 RawNode created with id 64910., raft_id: 64910, id: 64910    
25/11/30 09:13:02.472 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64910, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:13:02.473 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:13:02.473 INFO raft.rs:2668 switched to configuration, raft_id: 64911, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64910, 64911} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:13:02.473 INFO raft.rs:1132 became follower at term 0, raft_id: 64911, term: 0    
25/11/30 09:13:02.473 INFO raft.rs:393 newRaft, raft_id: 64911, peers: Configuration { incoming: Configuration { voters: {64910, 64911} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:13:02.473 INFO raw_node.rs:315 RawNode created with id 64911., raft_id: 64911, id: 64911    
25/11/30 09:13:02.473 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64911, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:13:03.796 INFO raft.rs:1562 starting a new election, raft_id: 64911, term: 0    
25/11/30 09:13:03.796 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64911, term: 0    
25/11/30 09:13:03.796 INFO raft.rs:1311 broadcasting vote request, raft_id: 64911, to: [64910], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:13:03.796 INFO raft_node.rs:457 Raft soft state change, node id 64911, current leader 0    
25/11/30 09:13:03.797 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64911 [logterm: 0, index: 0] at term 0, raft_id: 64910, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64911, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:13:03.902 INFO raft.rs:2224 received votes response, raft_id: 64911, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64910, vote: true    
25/11/30 09:13:03.903 INFO raft.rs:1156 became candidate at term 1, raft_id: 64911, term: 1    
25/11/30 09:13:03.903 INFO raft.rs:1311 broadcasting vote request, raft_id: 64911, to: [64910], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:13:04.005 INFO raft_node.rs:457 Raft soft state change, node id 64911, current leader 0    
25/11/30 09:13:04.006 INFO raft.rs:1376 received a message with higher term from 64911, raft_id: 64910, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64911    
25/11/30 09:13:04.006 INFO raft.rs:1132 became follower at term 1, raft_id: 64910, term: 1    
25/11/30 09:13:04.006 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64911 [logterm: 0, index: 0] at term 1, raft_id: 64910, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64911, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:13:04.108 INFO raft.rs:2224 received votes response, raft_id: 64911, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64910, vote: true    
25/11/30 09:13:04.109 INFO raft.rs:1240 became leader at term 1, raft_id: 64911, term: 1    
25/11/30 09:13:04.212 INFO raft_node.rs:457 Raft soft state change, node id 64911, current leader 64911    
25/11/30 09:13:04.225 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:13:04.225 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x13310fbb0, 0x111804c10, 0x111805cf0, 0x111605070], store: "<InodeStore>" }
inode: 0x111605070
complete_file: 1764468784227
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13310fbb0, 0x111804c10, 0x111605560], store: "<InodeStore>" }
inode: 0x111605560
complete_file: 1764468784227
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13310fbb0, 0x111804c10, 0x111605560], store: "<InodeStore>" }
inode: 0x111605560
complete_file: 1764468784228
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:13:04.229 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1568667990, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:13:04.229 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2647798873, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:13:04.315 INFO raft_node.rs:457 Raft soft state change, node id 64910, current leader 64911    
25/11/30 09:13:11.639 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1568667990, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:13:12.568 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2647798873, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.83s

âœ… Run 19 PASSED
ðŸ“Š Progress: 19 success, 0 fails
----------------------------------------
ðŸ”„ Run 20/100

running 1 test
25/11/30 09:13:34.976 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:13:34.987 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:13:34.987 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:13:34.988 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:13:35.005 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:13:35.007 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:13:35.017 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:13:35.017 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:13:35.018 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:13:35.037 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:13:35.037 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:13:35.038 INFO raft.rs:2668 switched to configuration, raft_id: 64917, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64917, 64918} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:13:35.038 INFO raft.rs:1132 became follower at term 0, raft_id: 64917, term: 0    
25/11/30 09:13:35.038 INFO raft.rs:393 newRaft, raft_id: 64917, peers: Configuration { incoming: Configuration { voters: {64917, 64918} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:13:35.038 INFO raw_node.rs:315 RawNode created with id 64917., raft_id: 64917, id: 64917    
25/11/30 09:13:35.039 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64917, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:13:35.040 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:13:35.040 INFO raft.rs:2668 switched to configuration, raft_id: 64918, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64917, 64918} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:13:35.040 INFO raft.rs:1132 became follower at term 0, raft_id: 64918, term: 0    
25/11/30 09:13:35.040 INFO raft.rs:393 newRaft, raft_id: 64918, peers: Configuration { incoming: Configuration { voters: {64917, 64918} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:13:35.040 INFO raw_node.rs:315 RawNode created with id 64918., raft_id: 64918, id: 64918    
25/11/30 09:13:35.040 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64918, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:13:36.976 INFO raft.rs:1562 starting a new election, raft_id: 64918, term: 0    
25/11/30 09:13:36.976 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64918, term: 0    
25/11/30 09:13:36.977 INFO raft.rs:1311 broadcasting vote request, raft_id: 64918, to: [64917], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:13:36.977 INFO raft_node.rs:457 Raft soft state change, node id 64918, current leader 0    
25/11/30 09:13:36.979 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64918 [logterm: 0, index: 0] at term 0, raft_id: 64917, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64918, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:13:37.084 INFO raft.rs:2224 received votes response, raft_id: 64918, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64917, vote: true    
25/11/30 09:13:37.085 INFO raft.rs:1156 became candidate at term 1, raft_id: 64918, term: 1    
25/11/30 09:13:37.085 INFO raft.rs:1311 broadcasting vote request, raft_id: 64918, to: [64917], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:13:37.187 INFO raft_node.rs:457 Raft soft state change, node id 64918, current leader 0    
25/11/30 09:13:37.188 INFO raft.rs:1376 received a message with higher term from 64918, raft_id: 64917, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64918    
25/11/30 09:13:37.188 INFO raft.rs:1132 became follower at term 1, raft_id: 64917, term: 1    
25/11/30 09:13:37.188 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64918 [logterm: 0, index: 0] at term 1, raft_id: 64917, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64918, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:13:37.291 INFO raft.rs:2224 received votes response, raft_id: 64918, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64917, vote: true    
25/11/30 09:13:37.291 INFO raft.rs:1240 became leader at term 1, raft_id: 64918, term: 1    
25/11/30 09:13:37.394 INFO raft_node.rs:457 Raft soft state change, node id 64918, current leader 64918    
25/11/30 09:13:37.427 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:13:37.428 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x14b0416f0, 0x12b004e70, 0x12b005f40, 0x12a605860], store: "<InodeStore>" }
inode: 0x12a605860
complete_file: 1764468817430
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14b0416f0, 0x12b004e70, 0x12a6060f0], store: "<InodeStore>" }
inode: 0x12a6060f0
complete_file: 1764468817432
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14b0416f0, 0x12b004e70, 0x12a6060f0], store: "<InodeStore>" }
inode: 0x12a6060f0
complete_file: 1764468817432
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:13:37.434 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2432605710, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:13:37.434 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3557752948, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:13:37.498 INFO raft_node.rs:457 Raft soft state change, node id 64917, current leader 64918    
25/11/30 09:13:44.811 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2432605710, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:13:45.739 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3557752948, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.47s

âœ… Run 20 PASSED
ðŸ“Š Progress: 20 success, 0 fails
----------------------------------------
ðŸ”„ Run 21/100

running 1 test
25/11/30 09:14:08.238 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:14:08.249 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:14:08.249 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:14:08.250 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:14:08.267 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:14:08.269 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:14:08.278 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:14:08.278 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:14:08.279 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:14:08.297 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:14:08.297 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:14:08.297 INFO raft.rs:2668 switched to configuration, raft_id: 64923, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64924, 64923} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:14:08.297 INFO raft.rs:1132 became follower at term 0, raft_id: 64923, term: 0    
25/11/30 09:14:08.297 INFO raft.rs:393 newRaft, raft_id: 64923, peers: Configuration { incoming: Configuration { voters: {64924, 64923} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:14:08.297 INFO raw_node.rs:315 RawNode created with id 64923., raft_id: 64923, id: 64923    
25/11/30 09:14:08.299 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64923, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:14:08.299 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:14:08.299 INFO raft.rs:2668 switched to configuration, raft_id: 64924, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64924, 64923} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:14:08.299 INFO raft.rs:1132 became follower at term 0, raft_id: 64924, term: 0    
25/11/30 09:14:08.299 INFO raft.rs:393 newRaft, raft_id: 64924, peers: Configuration { incoming: Configuration { voters: {64924, 64923} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:14:08.299 INFO raw_node.rs:315 RawNode created with id 64924., raft_id: 64924, id: 64924    
25/11/30 09:14:08.299 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64924, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:14:09.317 INFO raft.rs:1562 starting a new election, raft_id: 64924, term: 0    
25/11/30 09:14:09.318 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64924, term: 0    
25/11/30 09:14:09.318 INFO raft.rs:1311 broadcasting vote request, raft_id: 64924, to: [64923], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:14:09.318 INFO raft_node.rs:457 Raft soft state change, node id 64924, current leader 0    
25/11/30 09:14:09.319 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64924 [logterm: 0, index: 0] at term 0, raft_id: 64923, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64924, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:14:09.422 INFO raft.rs:2224 received votes response, raft_id: 64924, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64923, vote: true    
25/11/30 09:14:09.423 INFO raft.rs:1156 became candidate at term 1, raft_id: 64924, term: 1    
25/11/30 09:14:09.423 INFO raft.rs:1311 broadcasting vote request, raft_id: 64924, to: [64923], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:14:09.524 INFO raft_node.rs:457 Raft soft state change, node id 64924, current leader 0    
25/11/30 09:14:09.524 INFO raft.rs:1376 received a message with higher term from 64924, raft_id: 64923, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64924    
25/11/30 09:14:09.524 INFO raft.rs:1132 became follower at term 1, raft_id: 64923, term: 1    
25/11/30 09:14:09.524 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64924 [logterm: 0, index: 0] at term 1, raft_id: 64923, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64924, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:14:09.626 INFO raft.rs:2224 received votes response, raft_id: 64924, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64923, vote: true    
25/11/30 09:14:09.627 INFO raft.rs:1240 became leader at term 1, raft_id: 64924, term: 1    
25/11/30 09:14:09.729 INFO raft_node.rs:457 Raft soft state change, node id 64924, current leader 64924    
25/11/30 09:14:09.746 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:14:09.746 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x13364e950, 0x113604350, 0x113605050, 0x113604610], store: "<InodeStore>" }
inode: 0x113604610
complete_file: 1764468849749
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13364e950, 0x113604350, 0x1137047a0], store: "<InodeStore>" }
inode: 0x1137047a0
complete_file: 1764468849750
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x13364e950, 0x113604350, 0x114004c90], store: "<InodeStore>" }
inode: 0x114004c90
complete_file: 1764468849751
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:14:09.752 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2325073284, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:14:09.753 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3139417353, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:14:09.832 INFO raft_node.rs:457 Raft soft state change, node id 64923, current leader 64924    
25/11/30 09:14:17.236 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2325073284, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:14:18.156 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3139417353, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.52s

âœ… Run 21 PASSED
ðŸ“Š Progress: 21 success, 0 fails
----------------------------------------
ðŸ”„ Run 22/100

running 1 test
25/11/30 09:14:40.239 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:14:40.250 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:14:40.250 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:14:40.251 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:14:40.268 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:14:40.269 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:14:40.278 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:14:40.279 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:14:40.279 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:14:40.296 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:14:40.297 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:14:40.297 INFO raft.rs:2668 switched to configuration, raft_id: 64928, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64928, 64929} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:14:40.297 INFO raft.rs:1132 became follower at term 0, raft_id: 64928, term: 0    
25/11/30 09:14:40.297 INFO raft.rs:393 newRaft, raft_id: 64928, peers: Configuration { incoming: Configuration { voters: {64928, 64929} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:14:40.297 INFO raw_node.rs:315 RawNode created with id 64928., raft_id: 64928, id: 64928    
25/11/30 09:14:40.299 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64928, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:14:40.299 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:14:40.299 INFO raft.rs:2668 switched to configuration, raft_id: 64929, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64928, 64929} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:14:40.299 INFO raft.rs:1132 became follower at term 0, raft_id: 64929, term: 0    
25/11/30 09:14:40.299 INFO raft.rs:393 newRaft, raft_id: 64929, peers: Configuration { incoming: Configuration { voters: {64928, 64929} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:14:40.299 INFO raw_node.rs:315 RawNode created with id 64929., raft_id: 64929, id: 64929    
25/11/30 09:14:40.300 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64929, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:14:41.420 INFO raft.rs:1562 starting a new election, raft_id: 64929, term: 0    
25/11/30 09:14:41.421 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64929, term: 0    
25/11/30 09:14:41.421 INFO raft.rs:1311 broadcasting vote request, raft_id: 64929, to: [64928], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:14:41.421 INFO raft_node.rs:457 Raft soft state change, node id 64929, current leader 0    
25/11/30 09:14:41.423 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64929 [logterm: 0, index: 0] at term 0, raft_id: 64928, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64929, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:14:41.526 INFO raft.rs:2224 received votes response, raft_id: 64929, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64928, vote: true    
25/11/30 09:14:41.526 INFO raft.rs:1156 became candidate at term 1, raft_id: 64929, term: 1    
25/11/30 09:14:41.526 INFO raft.rs:1311 broadcasting vote request, raft_id: 64929, to: [64928], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:14:41.629 INFO raft_node.rs:457 Raft soft state change, node id 64929, current leader 0    
25/11/30 09:14:41.629 INFO raft.rs:1376 received a message with higher term from 64929, raft_id: 64928, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64929    
25/11/30 09:14:41.629 INFO raft.rs:1132 became follower at term 1, raft_id: 64928, term: 1    
25/11/30 09:14:41.629 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64929 [logterm: 0, index: 0] at term 1, raft_id: 64928, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64929, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:14:41.732 INFO raft.rs:2224 received votes response, raft_id: 64929, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64928, vote: true    
25/11/30 09:14:41.732 INFO raft.rs:1240 became leader at term 1, raft_id: 64929, term: 1    
25/11/30 09:14:41.835 INFO raft_node.rs:457 Raft soft state change, node id 64929, current leader 64929    
25/11/30 09:14:41.856 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:14:41.856 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x124e540b0, 0x126812750, 0x124f1a770, 0x124f1ab60], store: "<InodeStore>" }
inode: 0x124f1ab60
complete_file: 1764468881857
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x124e540b0, 0x126812750, 0x124f1a630], store: "<InodeStore>" }
inode: 0x124f1a630
complete_file: 1764468881857
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x124e540b0, 0x126812750, 0x124f1a630], store: "<InodeStore>" }
inode: 0x124f1a630
complete_file: 1764468881857
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:14:41.858 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1297388188, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:14:41.858 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1892936912, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:14:41.939 INFO raft_node.rs:457 Raft soft state change, node id 64928, current leader 64929    
25/11/30 09:14:49.250 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1297388188, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:14:50.176 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1892936912, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.63s

âœ… Run 22 PASSED
ðŸ“Š Progress: 22 success, 0 fails
----------------------------------------
ðŸ”„ Run 23/100

running 1 test
25/11/30 09:15:12.669 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:15:12.681 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:15:12.681 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:15:12.682 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:15:12.699 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:15:12.700 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:15:12.709 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:15:12.709 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:15:12.710 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:15:12.728 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:15:12.728 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:15:12.728 INFO raft.rs:2668 switched to configuration, raft_id: 64933, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64933, 64934} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:15:12.728 INFO raft.rs:1132 became follower at term 0, raft_id: 64933, term: 0    
25/11/30 09:15:12.728 INFO raft.rs:393 newRaft, raft_id: 64933, peers: Configuration { incoming: Configuration { voters: {64933, 64934} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:15:12.728 INFO raw_node.rs:315 RawNode created with id 64933., raft_id: 64933, id: 64933    
25/11/30 09:15:12.730 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64933, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:15:12.730 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:15:12.730 INFO raft.rs:2668 switched to configuration, raft_id: 64934, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64933, 64934} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:15:12.730 INFO raft.rs:1132 became follower at term 0, raft_id: 64934, term: 0    
25/11/30 09:15:12.730 INFO raft.rs:393 newRaft, raft_id: 64934, peers: Configuration { incoming: Configuration { voters: {64933, 64934} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:15:12.730 INFO raw_node.rs:315 RawNode created with id 64934., raft_id: 64934, id: 64934    
25/11/30 09:15:12.730 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64934, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:15:14.155 INFO raft.rs:1562 starting a new election, raft_id: 64934, term: 0    
25/11/30 09:15:14.156 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64934, term: 0    
25/11/30 09:15:14.156 INFO raft.rs:1311 broadcasting vote request, raft_id: 64934, to: [64933], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:15:14.156 INFO raft_node.rs:457 Raft soft state change, node id 64934, current leader 0    
25/11/30 09:15:14.157 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64934 [logterm: 0, index: 0] at term 0, raft_id: 64933, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64934, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:15:14.261 INFO raft.rs:2224 received votes response, raft_id: 64934, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64933, vote: true    
25/11/30 09:15:14.262 INFO raft.rs:1156 became candidate at term 1, raft_id: 64934, term: 1    
25/11/30 09:15:14.262 INFO raft.rs:1311 broadcasting vote request, raft_id: 64934, to: [64933], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:15:14.363 INFO raft_node.rs:457 Raft soft state change, node id 64934, current leader 0    
25/11/30 09:15:14.364 INFO raft.rs:1376 received a message with higher term from 64934, raft_id: 64933, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64934    
25/11/30 09:15:14.364 INFO raft.rs:1132 became follower at term 1, raft_id: 64933, term: 1    
25/11/30 09:15:14.364 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64934 [logterm: 0, index: 0] at term 1, raft_id: 64933, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64934, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:15:14.466 INFO raft.rs:2224 received votes response, raft_id: 64934, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64933, vote: true    
25/11/30 09:15:14.467 INFO raft.rs:1240 became leader at term 1, raft_id: 64934, term: 1    
25/11/30 09:15:14.570 INFO raft_node.rs:457 Raft soft state change, node id 64934, current leader 64934    
25/11/30 09:15:14.587 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:15:14.587 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x1481160a0, 0x108e048f0, 0x108e05c50, 0x108e055f0], store: "<InodeStore>" }
inode: 0x108e055f0
complete_file: 1764468914589
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x1481160a0, 0x108e048f0, 0x12ee05270], store: "<InodeStore>" }
inode: 0x12ee05270
complete_file: 1764468914589
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x1481160a0, 0x108e048f0, 0x12ee05260], store: "<InodeStore>" }
inode: 0x12ee05260
complete_file: 1764468914590
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:15:14.591 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1849265889, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:15:14.592 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2231108060, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:15:14.673 INFO raft_node.rs:457 Raft soft state change, node id 64933, current leader 64934    
25/11/30 09:15:21.986 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1849265889, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:15:22.913 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2231108060, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.93s

âœ… Run 23 PASSED
ðŸ“Š Progress: 23 success, 0 fails
----------------------------------------
ðŸ”„ Run 24/100

running 1 test
25/11/30 09:15:45.048 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:15:45.059 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:15:45.059 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:15:45.060 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:15:45.077 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:15:45.078 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:15:45.087 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:15:45.087 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:15:45.088 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:15:45.105 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:15:45.106 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:15:45.106 INFO raft.rs:2668 switched to configuration, raft_id: 64938, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64938, 64939} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:15:45.106 INFO raft.rs:1132 became follower at term 0, raft_id: 64938, term: 0    
25/11/30 09:15:45.106 INFO raft.rs:393 newRaft, raft_id: 64938, peers: Configuration { incoming: Configuration { voters: {64938, 64939} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:15:45.106 INFO raw_node.rs:315 RawNode created with id 64938., raft_id: 64938, id: 64938    
25/11/30 09:15:45.107 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64938, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:15:45.108 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:15:45.108 INFO raft.rs:2668 switched to configuration, raft_id: 64939, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64938, 64939} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:15:45.108 INFO raft.rs:1132 became follower at term 0, raft_id: 64939, term: 0    
25/11/30 09:15:45.108 INFO raft.rs:393 newRaft, raft_id: 64939, peers: Configuration { incoming: Configuration { voters: {64938, 64939} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:15:45.108 INFO raw_node.rs:315 RawNode created with id 64939., raft_id: 64939, id: 64939    
25/11/30 09:15:45.108 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64939, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:15:47.045 INFO raft.rs:1562 starting a new election, raft_id: 64938, term: 0    
25/11/30 09:15:47.046 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64938, term: 0    
25/11/30 09:15:47.046 INFO raft.rs:1311 broadcasting vote request, raft_id: 64938, to: [64939], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:15:47.046 INFO raft_node.rs:457 Raft soft state change, node id 64938, current leader 0    
25/11/30 09:15:47.048 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64938 [logterm: 0, index: 0] at term 0, raft_id: 64939, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64938, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:15:47.153 INFO raft.rs:2224 received votes response, raft_id: 64938, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64939, vote: true    
25/11/30 09:15:47.154 INFO raft.rs:1156 became candidate at term 1, raft_id: 64938, term: 1    
25/11/30 09:15:47.154 INFO raft.rs:1311 broadcasting vote request, raft_id: 64938, to: [64939], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:15:47.255 INFO raft_node.rs:457 Raft soft state change, node id 64938, current leader 0    
25/11/30 09:15:47.256 INFO raft.rs:1376 received a message with higher term from 64938, raft_id: 64939, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64938    
25/11/30 09:15:47.257 INFO raft.rs:1132 became follower at term 1, raft_id: 64939, term: 1    
25/11/30 09:15:47.257 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64938 [logterm: 0, index: 0] at term 1, raft_id: 64939, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64938, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:15:47.360 INFO raft.rs:2224 received votes response, raft_id: 64938, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64939, vote: true    
25/11/30 09:15:47.360 INFO raft.rs:1240 became leader at term 1, raft_id: 64938, term: 1    
25/11/30 09:15:47.462 INFO raft_node.rs:457 Raft soft state change, node id 64938, current leader 64938    
25/11/30 09:15:47.487 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:15:47.487 INFO journal_test.rs:141 state 2 Exit    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x12482b0f0, 0x10ae04da0, 0x10ae05e70, 0x10af04fe0], store: "<InodeStore>" }
inode: 0x10af04fe0
complete_file: 1764468947489
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x12482b0f0, 0x10ae04da0, 0x10af05660], store: "<InodeStore>" }
inode: 0x10af05660
complete_file: 1764468947490
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x12482b0f0, 0x10ae04da0, 0x10af05660], store: "<InodeStore>" }
inode: 0x10af05660
complete_file: 1764468947490
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:15:47.491 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 293551898, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:15:47.492 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1405991691, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:15:47.565 INFO raft_node.rs:457 Raft soft state change, node id 64939, current leader 64938    
25/11/30 09:15:54.856 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 293551898, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:15:55.777 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1405991691, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.45s

âœ… Run 24 PASSED
ðŸ“Š Progress: 24 success, 0 fails
----------------------------------------
ðŸ”„ Run 25/100

running 1 test
25/11/30 09:16:18.268 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:16:18.279 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:16:18.279 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:16:18.280 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:16:18.297 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:16:18.299 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:16:18.308 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:16:18.308 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:16:18.309 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:16:18.327 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:16:18.328 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:16:18.328 INFO raft.rs:2668 switched to configuration, raft_id: 64944, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64944, 64945} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:16:18.328 INFO raft.rs:1132 became follower at term 0, raft_id: 64944, term: 0    
25/11/30 09:16:18.328 INFO raft.rs:393 newRaft, raft_id: 64944, peers: Configuration { incoming: Configuration { voters: {64944, 64945} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:16:18.328 INFO raw_node.rs:315 RawNode created with id 64944., raft_id: 64944, id: 64944    
25/11/30 09:16:18.329 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64944, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:16:18.330 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:16:18.330 INFO raft.rs:2668 switched to configuration, raft_id: 64945, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64944, 64945} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:16:18.330 INFO raft.rs:1132 became follower at term 0, raft_id: 64945, term: 0    
25/11/30 09:16:18.330 INFO raft.rs:393 newRaft, raft_id: 64945, peers: Configuration { incoming: Configuration { voters: {64944, 64945} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:16:18.330 INFO raw_node.rs:315 RawNode created with id 64945., raft_id: 64945, id: 64945    
25/11/30 09:16:18.330 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64945, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:16:19.655 INFO raft.rs:1562 starting a new election, raft_id: 64945, term: 0    
25/11/30 09:16:19.655 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64945, term: 0    
25/11/30 09:16:19.655 INFO raft.rs:1311 broadcasting vote request, raft_id: 64945, to: [64944], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:16:19.655 INFO raft_node.rs:457 Raft soft state change, node id 64945, current leader 0    
25/11/30 09:16:19.656 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64945 [logterm: 0, index: 0] at term 0, raft_id: 64944, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64945, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:16:19.761 INFO raft.rs:2224 received votes response, raft_id: 64945, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64944, vote: true    
25/11/30 09:16:19.762 INFO raft.rs:1156 became candidate at term 1, raft_id: 64945, term: 1    
25/11/30 09:16:19.762 INFO raft.rs:1311 broadcasting vote request, raft_id: 64945, to: [64944], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:16:19.863 INFO raft_node.rs:457 Raft soft state change, node id 64945, current leader 0    
25/11/30 09:16:19.864 INFO raft.rs:1376 received a message with higher term from 64945, raft_id: 64944, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64945    
25/11/30 09:16:19.864 INFO raft.rs:1132 became follower at term 1, raft_id: 64944, term: 1    
25/11/30 09:16:19.864 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64945 [logterm: 0, index: 0] at term 1, raft_id: 64944, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64945, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:16:19.967 INFO raft.rs:2224 received votes response, raft_id: 64945, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64944, vote: true    
25/11/30 09:16:19.967 INFO raft.rs:1240 became leader at term 1, raft_id: 64945, term: 1    
25/11/30 09:16:20.069 INFO raft_node.rs:457 Raft soft state change, node id 64945, current leader 64945    
25/11/30 09:16:20.084 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:16:20.084 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x15461eb70, 0x1558481c0, 0x1558492c0, 0x1558499e0], store: "<InodeStore>" }
inode: 0x1558499e0
complete_file: 1764468980085
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x15461eb70, 0x1558481c0, 0x155848ec0], store: "<InodeStore>" }
inode: 0x155848ec0
complete_file: 1764468980086
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x15461eb70, 0x1558481c0, 0x155849070], store: "<InodeStore>" }
inode: 0x155849070
complete_file: 1764468980086
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:16:20.086 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2385172433, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:16:20.087 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2899576123, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:16:20.172 INFO raft_node.rs:457 Raft soft state change, node id 64944, current leader 64945    
25/11/30 09:16:27.483 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2385172433, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:16:28.411 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2899576123, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.83s

âœ… Run 25 PASSED
ðŸ“Š Progress: 25 success, 0 fails
----------------------------------------
ðŸ”„ Run 26/100

running 1 test
25/11/30 09:16:50.632 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:16:50.642 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:16:50.642 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:16:50.643 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:16:50.660 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:16:50.662 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:16:50.671 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:16:50.671 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:16:50.672 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:16:50.689 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:16:50.689 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:16:50.689 INFO raft.rs:2668 switched to configuration, raft_id: 64949, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64949, 64950} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:16:50.690 INFO raft.rs:1132 became follower at term 0, raft_id: 64949, term: 0    
25/11/30 09:16:50.690 INFO raft.rs:393 newRaft, raft_id: 64949, peers: Configuration { incoming: Configuration { voters: {64949, 64950} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:16:50.690 INFO raw_node.rs:315 RawNode created with id 64949., raft_id: 64949, id: 64949    
25/11/30 09:16:50.691 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64949, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:16:50.692 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:16:50.692 INFO raft.rs:2668 switched to configuration, raft_id: 64950, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64949, 64950} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:16:50.692 INFO raft.rs:1132 became follower at term 0, raft_id: 64950, term: 0    
25/11/30 09:16:50.692 INFO raft.rs:393 newRaft, raft_id: 64950, peers: Configuration { incoming: Configuration { voters: {64949, 64950} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:16:50.692 INFO raw_node.rs:315 RawNode created with id 64950., raft_id: 64950, id: 64950    
25/11/30 09:16:50.692 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64950, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:16:51.915 INFO raft.rs:1562 starting a new election, raft_id: 64950, term: 0    
25/11/30 09:16:51.916 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64950, term: 0    
25/11/30 09:16:51.916 INFO raft.rs:1311 broadcasting vote request, raft_id: 64950, to: [64949], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:16:51.916 INFO raft_node.rs:457 Raft soft state change, node id 64950, current leader 0    
25/11/30 09:16:51.917 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64950 [logterm: 0, index: 0] at term 0, raft_id: 64949, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64950, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:16:52.022 INFO raft.rs:2224 received votes response, raft_id: 64950, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64949, vote: true    
25/11/30 09:16:52.022 INFO raft.rs:1156 became candidate at term 1, raft_id: 64950, term: 1    
25/11/30 09:16:52.023 INFO raft.rs:1311 broadcasting vote request, raft_id: 64950, to: [64949], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:16:52.124 INFO raft_node.rs:457 Raft soft state change, node id 64950, current leader 0    
25/11/30 09:16:52.124 INFO raft.rs:1376 received a message with higher term from 64950, raft_id: 64949, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64950    
25/11/30 09:16:52.125 INFO raft.rs:1132 became follower at term 1, raft_id: 64949, term: 1    
25/11/30 09:16:52.125 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64950 [logterm: 0, index: 0] at term 1, raft_id: 64949, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64950, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:16:52.227 INFO raft.rs:2224 received votes response, raft_id: 64950, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64949, vote: true    
25/11/30 09:16:52.227 INFO raft.rs:1240 became leader at term 1, raft_id: 64950, term: 1    
25/11/30 09:16:52.329 INFO raft_node.rs:457 Raft soft state change, node id 64950, current leader 64950    
25/11/30 09:16:52.350 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:16:52.350 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x143f20f20, 0x123e04800, 0x124805d80, 0x1248063b0], store: "<InodeStore>" }
inode: 0x1248063b0
complete_file: 1764469012352
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x143f20f20, 0x123e04800, 0x1249057a0], store: "<InodeStore>" }
inode: 0x1249057a0
complete_file: 1764469012353
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x143f20f20, 0x123e04800, 0x124905b20], store: "<InodeStore>" }
inode: 0x124905b20
complete_file: 1764469012354
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:16:52.355 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3622273141, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:16:52.356 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1703069131, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:16:52.431 INFO raft_node.rs:457 Raft soft state change, node id 64949, current leader 64950    
25/11/30 09:16:59.840 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3622273141, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:17:00.771 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1703069131, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.73s

âœ… Run 26 PASSED
ðŸ“Š Progress: 26 success, 0 fails
----------------------------------------
ðŸ”„ Run 27/100

running 1 test
25/11/30 09:17:23.252 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:17:23.263 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:17:23.263 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:17:23.264 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:17:23.282 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:17:23.283 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:17:23.292 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:17:23.292 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:17:23.293 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:17:23.310 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:17:23.311 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:17:23.311 INFO raft.rs:2668 switched to configuration, raft_id: 64955, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64956, 64955} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:17:23.311 INFO raft.rs:1132 became follower at term 0, raft_id: 64955, term: 0    
25/11/30 09:17:23.311 INFO raft.rs:393 newRaft, raft_id: 64955, peers: Configuration { incoming: Configuration { voters: {64956, 64955} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:17:23.311 INFO raw_node.rs:315 RawNode created with id 64955., raft_id: 64955, id: 64955    
25/11/30 09:17:23.312 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64955, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:17:23.313 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:17:23.313 INFO raft.rs:2668 switched to configuration, raft_id: 64956, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64956, 64955} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:17:23.313 INFO raft.rs:1132 became follower at term 0, raft_id: 64956, term: 0    
25/11/30 09:17:23.313 INFO raft.rs:393 newRaft, raft_id: 64956, peers: Configuration { incoming: Configuration { voters: {64956, 64955} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:17:23.313 INFO raw_node.rs:315 RawNode created with id 64956., raft_id: 64956, id: 64956    
25/11/30 09:17:23.313 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64956, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:17:25.247 INFO raft.rs:1562 starting a new election, raft_id: 64956, term: 0    
25/11/30 09:17:25.247 INFO raft.rs:1562 starting a new election, raft_id: 64955, term: 0    
25/11/30 09:17:25.247 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64956, term: 0    
25/11/30 09:17:25.247 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64955, term: 0    
25/11/30 09:17:25.248 INFO raft.rs:1311 broadcasting vote request, raft_id: 64955, to: [64956], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:17:25.248 INFO raft.rs:1311 broadcasting vote request, raft_id: 64956, to: [64955], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:17:25.248 INFO raft_node.rs:457 Raft soft state change, node id 64955, current leader 0    
25/11/30 09:17:25.248 INFO raft_node.rs:457 Raft soft state change, node id 64956, current leader 0    
25/11/30 09:17:25.251 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64955 [logterm: 0, index: 0] at term 0, raft_id: 64956, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64955, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:17:25.251 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64956 [logterm: 0, index: 0] at term 0, raft_id: 64955, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64956, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:17:25.353 INFO raft.rs:2224 received votes response, raft_id: 64955, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64956, vote: true    
25/11/30 09:17:25.353 INFO raft.rs:1156 became candidate at term 1, raft_id: 64955, term: 1    
25/11/30 09:17:25.353 INFO raft.rs:2224 received votes response, raft_id: 64956, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64955, vote: true    
25/11/30 09:17:25.353 INFO raft.rs:1311 broadcasting vote request, raft_id: 64955, to: [64956], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:17:25.354 INFO raft.rs:1156 became candidate at term 1, raft_id: 64956, term: 1    
25/11/30 09:17:25.354 INFO raft.rs:1311 broadcasting vote request, raft_id: 64956, to: [64955], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:17:25.456 INFO raft_node.rs:457 Raft soft state change, node id 64956, current leader 0    
25/11/30 09:17:25.456 INFO raft_node.rs:457 Raft soft state change, node id 64955, current leader 0    
25/11/30 09:17:25.457 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64955] rejected vote from 64956 [logterm: 0, index: 0] at term 1, raft_id: 64955, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64956, vote: 64955, log_index: 0, log_term: 0    
25/11/30 09:17:25.457 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64956] rejected vote from 64955 [logterm: 0, index: 0] at term 1, raft_id: 64956, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64955, vote: 64956, log_index: 0, log_term: 0    
25/11/30 09:17:25.559 INFO raft.rs:2224 received votes response, raft_id: 64955, term: 1, type: MsgRequestVoteResponse, approvals: 1, rejections: 1, from: 64956, vote: false    
25/11/30 09:17:25.559 INFO raft.rs:1132 became follower at term 1, raft_id: 64955, term: 1    
25/11/30 09:17:25.559 INFO raft.rs:2224 received votes response, raft_id: 64956, term: 1, type: MsgRequestVoteResponse, approvals: 1, rejections: 1, from: 64955, vote: false    
25/11/30 09:17:25.559 INFO raft.rs:1132 became follower at term 1, raft_id: 64956, term: 1    
25/11/30 09:17:25.661 INFO raft_node.rs:457 Raft soft state change, node id 64956, current leader 0    
25/11/30 09:17:25.661 INFO raft_node.rs:457 Raft soft state change, node id 64955, current leader 0    
25/11/30 09:17:28.004 INFO raft.rs:1562 starting a new election, raft_id: 64956, term: 1    
25/11/30 09:17:28.004 INFO raft.rs:1182 became pre-candidate at term 1, raft_id: 64956, term: 1    
25/11/30 09:17:28.004 INFO raft.rs:1311 broadcasting vote request, raft_id: 64956, to: [64955], log_index: 0, log_term: 0, term: 1, type: MsgRequestPreVote    
25/11/30 09:17:28.004 INFO raft_node.rs:457 Raft soft state change, node id 64956, current leader 0    
25/11/30 09:17:28.004 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 64955] cast vote for 64956 [logterm: 0, index: 0] at term 1, raft_id: 64955, msg type: MsgRequestPreVote, term: 1, msg_index: 0, msg_term: 0, from: 64956, vote: 64955, log_index: 0, log_term: 0    
25/11/30 09:17:28.107 INFO raft.rs:2224 received votes response, raft_id: 64956, term: 1, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64955, vote: true    
25/11/30 09:17:28.107 INFO raft.rs:1156 became candidate at term 2, raft_id: 64956, term: 2    
25/11/30 09:17:28.107 INFO raft.rs:1311 broadcasting vote request, raft_id: 64956, to: [64955], log_index: 0, log_term: 0, term: 2, type: MsgRequestVote    
25/11/30 09:17:28.209 INFO raft.rs:1562 starting a new election, raft_id: 64955, term: 1    
25/11/30 09:17:28.209 INFO raft_node.rs:457 Raft soft state change, node id 64956, current leader 0    
25/11/30 09:17:28.209 INFO raft.rs:1182 became pre-candidate at term 1, raft_id: 64955, term: 1    
25/11/30 09:17:28.209 INFO raft.rs:1311 broadcasting vote request, raft_id: 64955, to: [64956], log_index: 0, log_term: 0, term: 1, type: MsgRequestPreVote    
25/11/30 09:17:28.209 INFO raft_node.rs:457 Raft soft state change, node id 64955, current leader 0    
25/11/30 09:17:28.209 INFO raft.rs:1376 received a message with higher term from 64956, raft_id: 64955, msg type: MsgRequestVote, message_term: 2, term: 1, from: 64956    
25/11/30 09:17:28.209 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64956] rejected vote from 64955 [logterm: 0, index: 0] at term 2, raft_id: 64956, msg type: MsgRequestPreVote, term: 2, msg_index: 0, msg_term: 0, from: 64955, vote: 64956, log_index: 0, log_term: 0    
25/11/30 09:17:28.209 INFO raft.rs:1132 became follower at term 2, raft_id: 64955, term: 2    
25/11/30 09:17:28.209 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64956 [logterm: 0, index: 0] at term 2, raft_id: 64955, msg type: MsgRequestVote, term: 2, msg_index: 0, msg_term: 0, from: 64956, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:17:28.311 INFO raft_node.rs:457 Raft soft state change, node id 64955, current leader 0    
25/11/30 09:17:28.311 INFO raft.rs:2224 received votes response, raft_id: 64956, term: 2, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64955, vote: true    
25/11/30 09:17:28.311 INFO raft.rs:1240 became leader at term 2, raft_id: 64956, term: 2    
25/11/30 09:17:28.414 INFO raft_node.rs:457 Raft soft state change, node id 64956, current leader 64956    
25/11/30 09:17:28.478 INFO journal_test.rs:140 state 1 Standby    
25/11/30 09:17:28.478 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x14900cce0, 0x147711ca0, 0x147717210, 0x14901bea0], store: "<InodeStore>" }
inode: 0x14901bea0
complete_file: 1764469048479
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14900cce0, 0x147711ca0, 0x14901c6f0], store: "<InodeStore>" }
inode: 0x14901c6f0
complete_file: 1764469048479
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14900cce0, 0x147711ca0, 0x14901c6f0], store: "<InodeStore>" }
inode: 0x14901c6f0
complete_file: 1764469048479
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:17:28.480 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3591516564, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:17:28.480 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 4057111154, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:17:28.517 INFO raft_node.rs:457 Raft soft state change, node id 64955, current leader 64956    
25/11/30 09:17:35.832 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3591516564, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:17:36.755 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 4057111154, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 35.24s

âœ… Run 27 PASSED
ðŸ“Š Progress: 27 success, 0 fails
----------------------------------------
ðŸ”„ Run 28/100

running 1 test
25/11/30 09:17:59.411 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:17:59.421 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:17:59.421 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:17:59.422 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:17:59.442 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:17:59.443 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:17:59.453 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:17:59.453 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:17:59.454 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:17:59.472 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:17:59.473 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:17:59.473 INFO raft.rs:2668 switched to configuration, raft_id: 64965, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64965, 64966} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:17:59.473 INFO raft.rs:1132 became follower at term 0, raft_id: 64965, term: 0    
25/11/30 09:17:59.473 INFO raft.rs:393 newRaft, raft_id: 64965, peers: Configuration { incoming: Configuration { voters: {64965, 64966} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:17:59.473 INFO raw_node.rs:315 RawNode created with id 64965., raft_id: 64965, id: 64965    
25/11/30 09:17:59.475 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64965, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:17:59.475 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:17:59.475 INFO raft.rs:2668 switched to configuration, raft_id: 64966, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64965, 64966} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:17:59.475 INFO raft.rs:1132 became follower at term 0, raft_id: 64966, term: 0    
25/11/30 09:17:59.475 INFO raft.rs:393 newRaft, raft_id: 64966, peers: Configuration { incoming: Configuration { voters: {64965, 64966} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:17:59.475 INFO raw_node.rs:315 RawNode created with id 64966., raft_id: 64966, id: 64966    
25/11/30 09:17:59.476 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64966, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:18:02.125 INFO raft.rs:1562 starting a new election, raft_id: 64966, term: 0    
25/11/30 09:18:02.126 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64966, term: 0    
25/11/30 09:18:02.126 INFO raft.rs:1311 broadcasting vote request, raft_id: 64966, to: [64965], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:18:02.126 INFO raft_node.rs:457 Raft soft state change, node id 64966, current leader 0    
25/11/30 09:18:02.127 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64966 [logterm: 0, index: 0] at term 0, raft_id: 64965, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64966, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:18:02.230 INFO raft.rs:2224 received votes response, raft_id: 64966, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64965, vote: true    
25/11/30 09:18:02.231 INFO raft.rs:1156 became candidate at term 1, raft_id: 64966, term: 1    
25/11/30 09:18:02.231 INFO raft.rs:1311 broadcasting vote request, raft_id: 64966, to: [64965], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:18:02.333 INFO raft_node.rs:457 Raft soft state change, node id 64966, current leader 0    
25/11/30 09:18:02.334 INFO raft.rs:1376 received a message with higher term from 64966, raft_id: 64965, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64966    
25/11/30 09:18:02.334 INFO raft.rs:1132 became follower at term 1, raft_id: 64965, term: 1    
25/11/30 09:18:02.334 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64966 [logterm: 0, index: 0] at term 1, raft_id: 64965, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64966, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:18:02.436 INFO raft.rs:2224 received votes response, raft_id: 64966, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64965, vote: true    
25/11/30 09:18:02.436 INFO raft.rs:1240 became leader at term 1, raft_id: 64966, term: 1    
25/11/30 09:18:02.539 INFO raft_node.rs:457 Raft soft state change, node id 64966, current leader 64966    
25/11/30 09:18:02.583 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:18:02.583 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x14cf0caa0, 0x12d004ed0, 0x12d005400, 0x12d005a30], store: "<InodeStore>" }
inode: 0x12d005a30
complete_file: 1764469082585
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:18:02.585 WARN cluster_connector.rs:272 Rpc(-4995611702508757019) call failed to active master localhost:64965: Not leader:     
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14cf0caa0, 0x12d004ed0, 0x12d005ee0], store: "<InodeStore>" }
inode: 0x12d005ee0
complete_file: 1764469082586
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x14cf0caa0, 0x12d004ed0, 0x12d0052c0], store: "<InodeStore>" }
inode: 0x12d0052c0
complete_file: 1764469082586
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:18:02.587 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1587407550, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:18:02.588 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3496252900, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:18:02.688 INFO raft_node.rs:457 Raft soft state change, node id 64965, current leader 64966    
25/11/30 09:18:30.089 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1587407550, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:18:31.018 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 3496252900, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 33.19s

âœ… Run 28 PASSED
ðŸ“Š Progress: 28 success, 0 fails
----------------------------------------
ðŸ”„ Run 29/100

running 1 test
25/11/30 09:18:33.040 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:18:33.050 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:18:33.051 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:18:33.051 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:18:33.069 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:18:33.070 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:18:33.079 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:18:33.079 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:18:33.080 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:18:33.097 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:18:33.097 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:18:33.097 INFO raft.rs:2668 switched to configuration, raft_id: 64972, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64972, 64973} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:18:33.097 INFO raft.rs:1132 became follower at term 0, raft_id: 64972, term: 0    
25/11/30 09:18:33.097 INFO raft.rs:393 newRaft, raft_id: 64972, peers: Configuration { incoming: Configuration { voters: {64972, 64973} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:18:33.097 INFO raw_node.rs:315 RawNode created with id 64972., raft_id: 64972, id: 64972    
25/11/30 09:18:33.099 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64972, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:18:33.099 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:18:33.099 INFO raft.rs:2668 switched to configuration, raft_id: 64973, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64972, 64973} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:18:33.099 INFO raft.rs:1132 became follower at term 0, raft_id: 64973, term: 0    
25/11/30 09:18:33.099 INFO raft.rs:393 newRaft, raft_id: 64973, peers: Configuration { incoming: Configuration { voters: {64972, 64973} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:18:33.099 INFO raw_node.rs:315 RawNode created with id 64973., raft_id: 64973, id: 64973    
25/11/30 09:18:33.100 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64973, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:18:35.546 INFO raft.rs:1562 starting a new election, raft_id: 64972, term: 0    
25/11/30 09:18:35.546 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64972, term: 0    
25/11/30 09:18:35.546 INFO raft.rs:1311 broadcasting vote request, raft_id: 64972, to: [64973], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:18:35.547 INFO raft_node.rs:457 Raft soft state change, node id 64972, current leader 0    
25/11/30 09:18:35.548 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64972 [logterm: 0, index: 0] at term 0, raft_id: 64973, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64972, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:18:35.650 INFO raft.rs:1562 starting a new election, raft_id: 64973, term: 0    
25/11/30 09:18:35.650 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64973, term: 0    
25/11/30 09:18:35.650 INFO raft.rs:1311 broadcasting vote request, raft_id: 64973, to: [64972], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:18:35.650 INFO raft_node.rs:457 Raft soft state change, node id 64973, current leader 0    
25/11/30 09:18:35.651 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64973 [logterm: 0, index: 0] at term 0, raft_id: 64972, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64973, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:18:35.652 INFO raft.rs:2224 received votes response, raft_id: 64972, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64973, vote: true    
25/11/30 09:18:35.652 INFO raft.rs:1156 became candidate at term 1, raft_id: 64972, term: 1    
25/11/30 09:18:35.652 INFO raft.rs:1311 broadcasting vote request, raft_id: 64972, to: [64973], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:18:35.754 INFO raft_node.rs:457 Raft soft state change, node id 64972, current leader 0    
25/11/30 09:18:35.756 INFO raft.rs:2224 received votes response, raft_id: 64973, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64972, vote: true    
25/11/30 09:18:35.756 INFO raft.rs:1156 became candidate at term 1, raft_id: 64973, term: 1    
25/11/30 09:18:35.756 INFO raft.rs:1311 broadcasting vote request, raft_id: 64973, to: [64972], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:18:35.757 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64973] rejected vote from 64972 [logterm: 0, index: 0] at term 1, raft_id: 64973, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64972, vote: 64973, log_index: 0, log_term: 0    
25/11/30 09:18:35.858 INFO raft_node.rs:457 Raft soft state change, node id 64973, current leader 0    
25/11/30 09:18:35.859 INFO raft.rs:1593 [logterm: 0, index: 0, vote: 64972] rejected vote from 64973 [logterm: 0, index: 0] at term 1, raft_id: 64972, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64973, vote: 64972, log_index: 0, log_term: 0    
25/11/30 09:18:35.859 INFO raft.rs:2224 received votes response, raft_id: 64972, term: 1, type: MsgRequestVoteResponse, approvals: 1, rejections: 1, from: 64973, vote: false    
25/11/30 09:18:35.859 INFO raft.rs:1132 became follower at term 1, raft_id: 64972, term: 1    
25/11/30 09:18:35.961 INFO raft_node.rs:457 Raft soft state change, node id 64972, current leader 0    
25/11/30 09:18:35.962 INFO raft.rs:2224 received votes response, raft_id: 64973, term: 1, type: MsgRequestVoteResponse, approvals: 1, rejections: 1, from: 64972, vote: false    
25/11/30 09:18:35.962 INFO raft.rs:1132 became follower at term 1, raft_id: 64973, term: 1    
25/11/30 09:18:36.064 INFO raft_node.rs:457 Raft soft state change, node id 64973, current leader 0    
25/11/30 09:18:37.594 INFO raft.rs:1562 starting a new election, raft_id: 64972, term: 1    
25/11/30 09:18:37.594 INFO raft.rs:1182 became pre-candidate at term 1, raft_id: 64972, term: 1    
25/11/30 09:18:37.594 INFO raft.rs:1311 broadcasting vote request, raft_id: 64972, to: [64973], log_index: 0, log_term: 0, term: 1, type: MsgRequestPreVote    
25/11/30 09:18:37.594 INFO raft_node.rs:457 Raft soft state change, node id 64972, current leader 0    
25/11/30 09:18:37.594 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 64973] cast vote for 64972 [logterm: 0, index: 0] at term 1, raft_id: 64973, msg type: MsgRequestPreVote, term: 1, msg_index: 0, msg_term: 0, from: 64972, vote: 64973, log_index: 0, log_term: 0    
25/11/30 09:18:37.698 INFO raft.rs:2224 received votes response, raft_id: 64972, term: 1, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64973, vote: true    
25/11/30 09:18:37.698 INFO raft.rs:1156 became candidate at term 2, raft_id: 64972, term: 2    
25/11/30 09:18:37.698 INFO raft.rs:1311 broadcasting vote request, raft_id: 64972, to: [64973], log_index: 0, log_term: 0, term: 2, type: MsgRequestVote    
25/11/30 09:18:37.800 INFO raft_node.rs:457 Raft soft state change, node id 64972, current leader 0    
25/11/30 09:18:37.801 INFO raft.rs:1376 received a message with higher term from 64972, raft_id: 64973, msg type: MsgRequestVote, message_term: 2, term: 1, from: 64972    
25/11/30 09:18:37.801 INFO raft.rs:1132 became follower at term 2, raft_id: 64973, term: 2    
25/11/30 09:18:37.801 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64972 [logterm: 0, index: 0] at term 2, raft_id: 64973, msg type: MsgRequestVote, term: 2, msg_index: 0, msg_term: 0, from: 64972, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:18:37.904 INFO raft.rs:2224 received votes response, raft_id: 64972, term: 2, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64973, vote: true    
25/11/30 09:18:37.904 INFO raft.rs:1240 became leader at term 2, raft_id: 64972, term: 2    
25/11/30 09:18:38.006 INFO raft_node.rs:457 Raft soft state change, node id 64972, current leader 64972    
25/11/30 09:18:38.069 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:18:38.069 INFO journal_test.rs:141 state 2 Standby    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x152904620, 0x151717150, 0x151718110, 0x151718e10], store: "<InodeStore>" }
inode: 0x151718e10
complete_file: 1764469118071
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:18:38.072 WARN cluster_connector.rs:272 Rpc(-5438005206612585653) call failed to active master localhost:64973: Not leader:     
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x152904620, 0x151717150, 0x151718e10], store: "<InodeStore>" }
inode: 0x151718e10
complete_file: 1764469118072
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x152904620, 0x151717150, 0x151717ee0], store: "<InodeStore>" }
inode: 0x151717ee0
complete_file: 1764469118072
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:18:38.073 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1793064350, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:18:38.074 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1142329820, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:18:38.174 INFO raft_node.rs:457 Raft soft state change, node id 64973, current leader 64972    
25/11/30 09:19:05.385 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1793064350, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:19:06.414 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1142329820, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 35.04s

âœ… Run 29 PASSED
ðŸ“Š Progress: 29 success, 0 fails
----------------------------------------
ðŸ”„ Run 30/100

running 1 test
25/11/30 09:19:08.524 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:19:08.536 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:19:08.536 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:19:08.537 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:19:08.555 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:19:08.556 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:19:08.565 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:19:08.565 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:19:08.566 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:19:08.583 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:19:08.583 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:19:08.584 INFO raft.rs:2668 switched to configuration, raft_id: 64981, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64981, 64982} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:19:08.584 INFO raft.rs:1132 became follower at term 0, raft_id: 64981, term: 0    
25/11/30 09:19:08.584 INFO raft.rs:393 newRaft, raft_id: 64981, peers: Configuration { incoming: Configuration { voters: {64981, 64982} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:19:08.584 INFO raw_node.rs:315 RawNode created with id 64981., raft_id: 64981, id: 64981    
25/11/30 09:19:08.585 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64981, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:19:08.585 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:19:08.586 INFO raft.rs:2668 switched to configuration, raft_id: 64982, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64981, 64982} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:19:08.586 INFO raft.rs:1132 became follower at term 0, raft_id: 64982, term: 0    
25/11/30 09:19:08.586 INFO raft.rs:393 newRaft, raft_id: 64982, peers: Configuration { incoming: Configuration { voters: {64981, 64982} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:19:08.586 INFO raw_node.rs:315 RawNode created with id 64982., raft_id: 64982, id: 64982    
25/11/30 09:19:08.586 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64982, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:19:09.912 INFO raft.rs:1562 starting a new election, raft_id: 64981, term: 0    
25/11/30 09:19:09.913 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64981, term: 0    
25/11/30 09:19:09.913 INFO raft.rs:1311 broadcasting vote request, raft_id: 64981, to: [64982], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:19:09.913 INFO raft_node.rs:457 Raft soft state change, node id 64981, current leader 0    
25/11/30 09:19:09.915 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64981 [logterm: 0, index: 0] at term 0, raft_id: 64982, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64981, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:19:10.019 INFO raft.rs:2224 received votes response, raft_id: 64981, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64982, vote: true    
25/11/30 09:19:10.020 INFO raft.rs:1156 became candidate at term 1, raft_id: 64981, term: 1    
25/11/30 09:19:10.020 INFO raft.rs:1311 broadcasting vote request, raft_id: 64981, to: [64982], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:19:10.122 INFO raft_node.rs:457 Raft soft state change, node id 64981, current leader 0    
25/11/30 09:19:10.123 INFO raft.rs:1376 received a message with higher term from 64981, raft_id: 64982, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64981    
25/11/30 09:19:10.124 INFO raft.rs:1132 became follower at term 1, raft_id: 64982, term: 1    
25/11/30 09:19:10.124 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64981 [logterm: 0, index: 0] at term 1, raft_id: 64982, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64981, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:19:10.226 INFO raft.rs:2224 received votes response, raft_id: 64981, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64982, vote: true    
25/11/30 09:19:10.226 INFO raft.rs:1240 became leader at term 1, raft_id: 64981, term: 1    
25/11/30 09:19:10.329 INFO raft_node.rs:457 Raft soft state change, node id 64981, current leader 64981    
25/11/30 09:19:10.347 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:19:10.347 INFO journal_test.rs:141 state 2 Exit    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x12870d950, 0x12a905810, 0x12a9068e0, 0x12a9056d0], store: "<InodeStore>" }
inode: 0x12a9056d0
complete_file: 1764469150349
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x12870d950, 0x12a905810, 0x12a9056d0], store: "<InodeStore>" }
inode: 0x12a9056d0
complete_file: 1764469150350
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x12870d950, 0x12a905810, 0x12a9056d0], store: "<InodeStore>" }
inode: 0x12a9056d0
complete_file: 1764469150350
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:19:10.351 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 4180617347, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:19:10.352 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1265661174, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:19:10.432 INFO raft_node.rs:457 Raft soft state change, node id 64982, current leader 64981    
25/11/30 09:19:17.738 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 4180617347, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:19:18.665 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1265661174, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.84s

âœ… Run 30 PASSED
ðŸ“Š Progress: 30 success, 0 fails
----------------------------------------
ðŸ”„ Run 31/100

running 1 test
25/11/30 09:19:40.800 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:19:40.811 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:19:40.811 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:19:40.812 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:19:40.829 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:19:40.830 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:19:40.839 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:19:40.839 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:19:40.840 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:19:40.857 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:19:40.857 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:19:40.857 INFO raft.rs:2668 switched to configuration, raft_id: 64987, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64988, 64987} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:19:40.858 INFO raft.rs:1132 became follower at term 0, raft_id: 64987, term: 0    
25/11/30 09:19:40.858 INFO raft.rs:393 newRaft, raft_id: 64987, peers: Configuration { incoming: Configuration { voters: {64988, 64987} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:19:40.858 INFO raw_node.rs:315 RawNode created with id 64987., raft_id: 64987, id: 64987    
25/11/30 09:19:40.859 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64987, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:19:40.860 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:19:40.860 INFO raft.rs:2668 switched to configuration, raft_id: 64988, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64988, 64987} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:19:40.860 INFO raft.rs:1132 became follower at term 0, raft_id: 64988, term: 0    
25/11/30 09:19:40.860 INFO raft.rs:393 newRaft, raft_id: 64988, peers: Configuration { incoming: Configuration { voters: {64988, 64987} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:19:40.860 INFO raw_node.rs:315 RawNode created with id 64988., raft_id: 64988, id: 64988    
25/11/30 09:19:40.860 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64988, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:19:42.490 INFO raft.rs:1562 starting a new election, raft_id: 64988, term: 0    
25/11/30 09:19:42.490 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64988, term: 0    
25/11/30 09:19:42.491 INFO raft.rs:1311 broadcasting vote request, raft_id: 64988, to: [64987], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:19:42.491 INFO raft_node.rs:457 Raft soft state change, node id 64988, current leader 0    
25/11/30 09:19:42.492 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64988 [logterm: 0, index: 0] at term 0, raft_id: 64987, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64988, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:19:42.594 INFO raft.rs:2224 received votes response, raft_id: 64988, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64987, vote: true    
25/11/30 09:19:42.594 INFO raft.rs:1156 became candidate at term 1, raft_id: 64988, term: 1    
25/11/30 09:19:42.594 INFO raft.rs:1311 broadcasting vote request, raft_id: 64988, to: [64987], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:19:42.697 INFO raft_node.rs:457 Raft soft state change, node id 64988, current leader 0    
25/11/30 09:19:42.697 INFO raft.rs:1376 received a message with higher term from 64988, raft_id: 64987, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64988    
25/11/30 09:19:42.697 INFO raft.rs:1132 became follower at term 1, raft_id: 64987, term: 1    
25/11/30 09:19:42.697 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64988 [logterm: 0, index: 0] at term 1, raft_id: 64987, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64988, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:19:42.800 INFO raft.rs:2224 received votes response, raft_id: 64988, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64987, vote: true    
25/11/30 09:19:42.800 INFO raft.rs:1240 became leader at term 1, raft_id: 64988, term: 1    
25/11/30 09:19:42.903 INFO raft_node.rs:457 Raft soft state change, node id 64988, current leader 64988    
25/11/30 09:19:42.934 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:19:42.934 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x156f102e0, 0x136e04380, 0x136e05500, 0x156f2caf0], store: "<InodeStore>" }
inode: 0x156f2caf0
complete_file: 1764469182936
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x156f102e0, 0x136e04380, 0x156f2d020], store: "<InodeStore>" }
inode: 0x156f2d020
complete_file: 1764469182937
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x156f102e0, 0x136e04380, 0x156f2d020], store: "<InodeStore>" }
inode: 0x156f2d020
complete_file: 1764469182938
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:19:42.939 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3369335566, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:19:42.939 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 268944021, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:19:43.006 INFO raft_node.rs:457 Raft soft state change, node id 64987, current leader 64988    
25/11/30 09:19:50.305 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 3369335566, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:19:51.231 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 268944021, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.15s

âœ… Run 31 PASSED
ðŸ“Š Progress: 31 success, 0 fails
----------------------------------------
ðŸ”„ Run 32/100

running 1 test
25/11/30 09:20:13.417 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:20:13.427 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:20:13.428 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:20:13.428 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:20:13.446 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:20:13.447 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:20:13.456 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:20:13.456 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:20:13.456 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:20:13.474 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:20:13.474 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:20:13.474 INFO raft.rs:2668 switched to configuration, raft_id: 64996, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64996, 64997} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:20:13.474 INFO raft.rs:1132 became follower at term 0, raft_id: 64996, term: 0    
25/11/30 09:20:13.474 INFO raft.rs:393 newRaft, raft_id: 64996, peers: Configuration { incoming: Configuration { voters: {64996, 64997} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:20:13.474 INFO raw_node.rs:315 RawNode created with id 64996., raft_id: 64996, id: 64996    
25/11/30 09:20:13.476 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64996, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:20:13.476 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:20:13.476 INFO raft.rs:2668 switched to configuration, raft_id: 64997, config: Configuration { voters: Configuration { incoming: Configuration { voters: {64996, 64997} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:20:13.476 INFO raft.rs:1132 became follower at term 0, raft_id: 64997, term: 0    
25/11/30 09:20:13.476 INFO raft.rs:393 newRaft, raft_id: 64997, peers: Configuration { incoming: Configuration { voters: {64996, 64997} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:20:13.476 INFO raw_node.rs:315 RawNode created with id 64997., raft_id: 64997, id: 64997    
25/11/30 09:20:13.476 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:64997, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:20:16.328 INFO raft.rs:1562 starting a new election, raft_id: 64997, term: 0    
25/11/30 09:20:16.328 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64997, term: 0    
25/11/30 09:20:16.328 INFO raft.rs:1311 broadcasting vote request, raft_id: 64997, to: [64996], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:20:16.329 INFO raft_node.rs:457 Raft soft state change, node id 64997, current leader 0    
25/11/30 09:20:16.331 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64997 [logterm: 0, index: 0] at term 0, raft_id: 64996, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64997, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:20:16.432 INFO raft.rs:1562 starting a new election, raft_id: 64996, term: 0    
25/11/30 09:20:16.432 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 64996, term: 0    
25/11/30 09:20:16.432 INFO raft.rs:1311 broadcasting vote request, raft_id: 64996, to: [64997], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:20:16.432 INFO raft_node.rs:457 Raft soft state change, node id 64996, current leader 0    
25/11/30 09:20:16.434 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64996 [logterm: 0, index: 0] at term 0, raft_id: 64997, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 64996, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:20:16.434 INFO raft.rs:2224 received votes response, raft_id: 64997, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 64996, vote: true    
25/11/30 09:20:16.434 INFO raft.rs:1156 became candidate at term 1, raft_id: 64997, term: 1    
25/11/30 09:20:16.434 INFO raft.rs:1311 broadcasting vote request, raft_id: 64997, to: [64996], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:20:16.536 INFO raft_node.rs:457 Raft soft state change, node id 64997, current leader 0    
25/11/30 09:20:16.538 INFO raft.rs:1376 received a message with higher term from 64997, raft_id: 64996, msg type: MsgRequestVote, message_term: 1, term: 0, from: 64997    
25/11/30 09:20:16.538 INFO raft.rs:1132 became follower at term 1, raft_id: 64996, term: 1    
25/11/30 09:20:16.538 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 64997 [logterm: 0, index: 0] at term 1, raft_id: 64996, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 64997, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:20:16.640 INFO raft_node.rs:457 Raft soft state change, node id 64996, current leader 0    
25/11/30 09:20:16.641 INFO raft.rs:2224 received votes response, raft_id: 64997, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 64996, vote: true    
25/11/30 09:20:16.641 INFO raft.rs:1240 became leader at term 1, raft_id: 64997, term: 1    
25/11/30 09:20:16.743 INFO raft_node.rs:457 Raft soft state change, node id 64997, current leader 64997    
25/11/30 09:20:16.807 INFO journal_test.rs:140 state 1 Standby    
25/11/30 09:20:16.807 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x152023fe0, 0x132005150, 0x132105f60, 0x132006110], store: "<InodeStore>" }
inode: 0x132006110
complete_file: 1764469216810
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x152023fe0, 0x132005150, 0x132005c10], store: "<InodeStore>" }
inode: 0x132005c10
complete_file: 1764469216811
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x152023fe0, 0x132005150, 0x132005d80], store: "<InodeStore>" }
inode: 0x132005d80
complete_file: 1764469216812
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:20:16.814 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2717413165, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:20:16.814 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 707202787, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:20:16.846 INFO raft_node.rs:457 Raft soft state change, node id 64996, current leader 64997    
25/11/30 09:20:24.302 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2717413165, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:20:25.228 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 707202787, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 33.41s

âœ… Run 32 PASSED
ðŸ“Š Progress: 32 success, 0 fails
----------------------------------------
ðŸ”„ Run 33/100

running 1 test
25/11/30 09:20:47.543 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:20:47.554 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:20:47.554 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:20:47.555 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:20:47.572 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:20:47.574 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:20:47.583 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:20:47.583 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:20:47.584 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:20:47.601 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:20:47.602 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:20:47.602 INFO raft.rs:2668 switched to configuration, raft_id: 65002, config: Configuration { voters: Configuration { incoming: Configuration { voters: {65002, 65003} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:20:47.602 INFO raft.rs:1132 became follower at term 0, raft_id: 65002, term: 0    
25/11/30 09:20:47.602 INFO raft.rs:393 newRaft, raft_id: 65002, peers: Configuration { incoming: Configuration { voters: {65002, 65003} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:20:47.602 INFO raw_node.rs:315 RawNode created with id 65002., raft_id: 65002, id: 65002    
25/11/30 09:20:47.603 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:65002, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:20:47.604 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:20:47.604 INFO raft.rs:2668 switched to configuration, raft_id: 65003, config: Configuration { voters: Configuration { incoming: Configuration { voters: {65002, 65003} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:20:47.604 INFO raft.rs:1132 became follower at term 0, raft_id: 65003, term: 0    
25/11/30 09:20:47.604 INFO raft.rs:393 newRaft, raft_id: 65003, peers: Configuration { incoming: Configuration { voters: {65002, 65003} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:20:47.604 INFO raw_node.rs:315 RawNode created with id 65003., raft_id: 65003, id: 65003    
25/11/30 09:20:47.604 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:65003, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:20:50.253 INFO raft.rs:1562 starting a new election, raft_id: 65003, term: 0    
25/11/30 09:20:50.253 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 65003, term: 0    
25/11/30 09:20:50.253 INFO raft.rs:1311 broadcasting vote request, raft_id: 65003, to: [65002], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:20:50.253 INFO raft_node.rs:457 Raft soft state change, node id 65003, current leader 0    
25/11/30 09:20:50.255 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 65003 [logterm: 0, index: 0] at term 0, raft_id: 65002, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 65003, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:20:50.358 INFO raft.rs:2224 received votes response, raft_id: 65003, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 65002, vote: true    
25/11/30 09:20:50.359 INFO raft.rs:1156 became candidate at term 1, raft_id: 65003, term: 1    
25/11/30 09:20:50.359 INFO raft.rs:1311 broadcasting vote request, raft_id: 65003, to: [65002], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:20:50.461 INFO raft_node.rs:457 Raft soft state change, node id 65003, current leader 0    
25/11/30 09:20:50.464 INFO raft.rs:1376 received a message with higher term from 65003, raft_id: 65002, msg type: MsgRequestVote, message_term: 1, term: 0, from: 65003    
25/11/30 09:20:50.465 INFO raft.rs:1132 became follower at term 1, raft_id: 65002, term: 1    
25/11/30 09:20:50.465 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 65003 [logterm: 0, index: 0] at term 1, raft_id: 65002, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 65003, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:20:50.568 INFO raft.rs:2224 received votes response, raft_id: 65003, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 65002, vote: true    
25/11/30 09:20:50.568 INFO raft.rs:1240 became leader at term 1, raft_id: 65003, term: 1    
25/11/30 09:20:50.671 INFO raft_node.rs:457 Raft soft state change, node id 65003, current leader 65003    
25/11/30 09:20:50.729 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:20:50.729 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x132024660, 0x111704a50, 0x1116051c0, 0x111605930], store: "<InodeStore>" }
inode: 0x111605930
complete_file: 1764469250731
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x132024660, 0x111704a50, 0x111605e40], store: "<InodeStore>" }
inode: 0x111605e40
complete_file: 1764469250731
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x132024660, 0x111704a50, 0x111605300], store: "<InodeStore>" }
inode: 0x111605300
complete_file: 1764469250732
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:20:50.733 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 4010978648, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:20:50.734 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 466188182, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:20:50.773 INFO raft_node.rs:457 Raft soft state change, node id 65002, current leader 65003    
25/11/30 09:20:58.084 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 4010978648, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:20:59.012 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 466188182, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 33.20s

âœ… Run 33 PASSED
ðŸ“Š Progress: 33 success, 0 fails
----------------------------------------
ðŸ”„ Run 34/100

running 1 test
25/11/30 09:21:21.196 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:21:21.207 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:21:21.207 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:21:21.208 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:21:21.226 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:21:21.228 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:21:21.242 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:21:21.242 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:21:21.243 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:21:21.273 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:21:21.273 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:21:21.274 INFO raft.rs:2668 switched to configuration, raft_id: 65012, config: Configuration { voters: Configuration { incoming: Configuration { voters: {65012, 65013} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:21:21.274 INFO raft.rs:1132 became follower at term 0, raft_id: 65012, term: 0    
25/11/30 09:21:21.274 INFO raft.rs:393 newRaft, raft_id: 65012, peers: Configuration { incoming: Configuration { voters: {65012, 65013} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:21:21.274 INFO raw_node.rs:315 RawNode created with id 65012., raft_id: 65012, id: 65012    
25/11/30 09:21:21.275 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:65012, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:21:21.276 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:21:21.276 INFO raft.rs:2668 switched to configuration, raft_id: 65013, config: Configuration { voters: Configuration { incoming: Configuration { voters: {65012, 65013} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:21:21.276 INFO raft.rs:1132 became follower at term 0, raft_id: 65013, term: 0    
25/11/30 09:21:21.276 INFO raft.rs:393 newRaft, raft_id: 65013, peers: Configuration { incoming: Configuration { voters: {65012, 65013} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:21:21.276 INFO raw_node.rs:315 RawNode created with id 65013., raft_id: 65013, id: 65013    
25/11/30 09:21:21.276 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:65013, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:21:22.705 INFO raft.rs:1562 starting a new election, raft_id: 65013, term: 0    
25/11/30 09:21:22.705 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 65013, term: 0    
25/11/30 09:21:22.705 INFO raft.rs:1311 broadcasting vote request, raft_id: 65013, to: [65012], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:21:22.705 INFO raft_node.rs:457 Raft soft state change, node id 65013, current leader 0    
25/11/30 09:21:22.707 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 65013 [logterm: 0, index: 0] at term 0, raft_id: 65012, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 65013, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:21:22.810 INFO raft.rs:2224 received votes response, raft_id: 65013, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 65012, vote: true    
25/11/30 09:21:22.810 INFO raft.rs:1156 became candidate at term 1, raft_id: 65013, term: 1    
25/11/30 09:21:22.810 INFO raft.rs:1311 broadcasting vote request, raft_id: 65013, to: [65012], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:21:22.912 INFO raft_node.rs:457 Raft soft state change, node id 65013, current leader 0    
25/11/30 09:21:22.912 INFO raft.rs:1376 received a message with higher term from 65013, raft_id: 65012, msg type: MsgRequestVote, message_term: 1, term: 0, from: 65013    
25/11/30 09:21:22.912 INFO raft.rs:1132 became follower at term 1, raft_id: 65012, term: 1    
25/11/30 09:21:22.912 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 65013 [logterm: 0, index: 0] at term 1, raft_id: 65012, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 65013, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:21:23.015 INFO raft.rs:2224 received votes response, raft_id: 65013, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 65012, vote: true    
25/11/30 09:21:23.015 INFO raft.rs:1240 became leader at term 1, raft_id: 65013, term: 1    
25/11/30 09:21:23.117 INFO raft_node.rs:457 Raft soft state change, node id 65013, current leader 65013    
25/11/30 09:21:23.130 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:21:23.130 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x1537401f0, 0x134904aa0, 0x133604470, 0x134804fc0], store: "<InodeStore>" }
inode: 0x134804fc0
complete_file: 1764469283133
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:21:23.134 WARN cluster_connector.rs:272 Rpc(-5930772376708528616) call failed to active master localhost:65012: Not leader:     
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x1537401f0, 0x134904aa0, 0x134905800], store: "<InodeStore>" }
inode: 0x134905800
complete_file: 1764469283134
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x1537401f0, 0x134904aa0, 0x134905120], store: "<InodeStore>" }
inode: 0x134905120
complete_file: 1764469283134
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:21:23.136 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1896762458, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:21:23.136 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2685708687, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:21:23.235 INFO raft_node.rs:457 Raft soft state change, node id 65012, current leader 65013    
25/11/30 09:21:50.562 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 1896762458, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:21:51.494 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2685708687, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.95s

âœ… Run 34 PASSED
ðŸ“Š Progress: 34 success, 0 fails
----------------------------------------
ðŸ”„ Run 35/100

running 1 test
25/11/30 09:21:53.955 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:21:53.966 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:21:53.966 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:21:53.967 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:21:53.984 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:21:53.986 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:21:53.995 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:21:53.995 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:21:53.996 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:21:54.013 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:21:54.014 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:21:54.014 INFO raft.rs:2668 switched to configuration, raft_id: 65028, config: Configuration { voters: Configuration { incoming: Configuration { voters: {65028, 65029} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:21:54.014 INFO raft.rs:1132 became follower at term 0, raft_id: 65028, term: 0    
25/11/30 09:21:54.014 INFO raft.rs:393 newRaft, raft_id: 65028, peers: Configuration { incoming: Configuration { voters: {65028, 65029} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:21:54.014 INFO raw_node.rs:315 RawNode created with id 65028., raft_id: 65028, id: 65028    
25/11/30 09:21:54.015 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:65028, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:21:54.016 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:21:54.016 INFO raft.rs:2668 switched to configuration, raft_id: 65029, config: Configuration { voters: Configuration { incoming: Configuration { voters: {65028, 65029} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:21:54.016 INFO raft.rs:1132 became follower at term 0, raft_id: 65029, term: 0    
25/11/30 09:21:54.016 INFO raft.rs:393 newRaft, raft_id: 65029, peers: Configuration { incoming: Configuration { voters: {65028, 65029} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:21:54.016 INFO raw_node.rs:315 RawNode created with id 65029., raft_id: 65029, id: 65029    
25/11/30 09:21:54.016 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:65029, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:21:55.951 INFO raft.rs:1562 starting a new election, raft_id: 65028, term: 0    
25/11/30 09:21:55.951 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 65028, term: 0    
25/11/30 09:21:55.952 INFO raft.rs:1311 broadcasting vote request, raft_id: 65028, to: [65029], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:21:55.952 INFO raft_node.rs:457 Raft soft state change, node id 65028, current leader 0    
25/11/30 09:21:55.953 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 65028 [logterm: 0, index: 0] at term 0, raft_id: 65029, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 65028, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:21:56.057 INFO raft.rs:2224 received votes response, raft_id: 65028, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 65029, vote: true    
25/11/30 09:21:56.057 INFO raft.rs:1156 became candidate at term 1, raft_id: 65028, term: 1    
25/11/30 09:21:56.058 INFO raft.rs:1311 broadcasting vote request, raft_id: 65028, to: [65029], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:21:56.159 INFO raft_node.rs:457 Raft soft state change, node id 65028, current leader 0    
25/11/30 09:21:56.162 INFO raft.rs:1376 received a message with higher term from 65028, raft_id: 65029, msg type: MsgRequestVote, message_term: 1, term: 0, from: 65028    
25/11/30 09:21:56.162 INFO raft.rs:1132 became follower at term 1, raft_id: 65029, term: 1    
25/11/30 09:21:56.162 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 65028 [logterm: 0, index: 0] at term 1, raft_id: 65029, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 65028, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:21:56.265 INFO raft.rs:2224 received votes response, raft_id: 65028, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 65029, vote: true    
25/11/30 09:21:56.265 INFO raft.rs:1240 became leader at term 1, raft_id: 65028, term: 1    
25/11/30 09:21:56.367 INFO raft_node.rs:457 Raft soft state change, node id 65028, current leader 65028    
25/11/30 09:21:56.405 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:21:56.405 INFO journal_test.rs:141 state 2 Exit    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x133f402c0, 0x114005650, 0x134a05520, 0x134a053e0], store: "<InodeStore>" }
inode: 0x134a053e0
complete_file: 1764469316407
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x133f402c0, 0x114005650, 0x134a052a0], store: "<InodeStore>" }
inode: 0x134a052a0
complete_file: 1764469316408
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x133f402c0, 0x114005650, 0x113f04e20], store: "<InodeStore>" }
inode: 0x113f04e20
complete_file: 1764469316408
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:21:56.409 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2412861915, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:21:56.409 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2741967802, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:21:56.471 INFO raft_node.rs:457 Raft soft state change, node id 65029, current leader 65028    
25/11/30 09:22:03.768 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2412861915, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:22:04.697 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2741967802, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.47s

âœ… Run 35 PASSED
ðŸ“Š Progress: 35 success, 0 fails
----------------------------------------
ðŸ”„ Run 36/100

running 1 test
25/11/30 09:22:27.134 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:22:27.145 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:22:27.146 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:22:27.147 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:22:27.165 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:22:27.167 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:22:27.177 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:22:27.177 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:22:27.178 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:22:27.196 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:22:27.197 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:22:27.197 INFO raft.rs:2668 switched to configuration, raft_id: 65033, config: Configuration { voters: Configuration { incoming: Configuration { voters: {65033, 65034} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:22:27.197 INFO raft.rs:1132 became follower at term 0, raft_id: 65033, term: 0    
25/11/30 09:22:27.197 INFO raft.rs:393 newRaft, raft_id: 65033, peers: Configuration { incoming: Configuration { voters: {65033, 65034} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:22:27.197 INFO raw_node.rs:315 RawNode created with id 65033., raft_id: 65033, id: 65033    
25/11/30 09:22:27.199 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:65033, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:22:27.199 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:22:27.199 INFO raft.rs:2668 switched to configuration, raft_id: 65034, config: Configuration { voters: Configuration { incoming: Configuration { voters: {65033, 65034} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:22:27.199 INFO raft.rs:1132 became follower at term 0, raft_id: 65034, term: 0    
25/11/30 09:22:27.199 INFO raft.rs:393 newRaft, raft_id: 65034, peers: Configuration { incoming: Configuration { voters: {65033, 65034} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:22:27.199 INFO raw_node.rs:315 RawNode created with id 65034., raft_id: 65034, id: 65034    
25/11/30 09:22:27.200 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:65034, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:22:29.036 INFO raft.rs:1562 starting a new election, raft_id: 65034, term: 0    
25/11/30 09:22:29.037 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 65034, term: 0    
25/11/30 09:22:29.037 INFO raft.rs:1311 broadcasting vote request, raft_id: 65034, to: [65033], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:22:29.037 INFO raft_node.rs:457 Raft soft state change, node id 65034, current leader 0    
25/11/30 09:22:29.041 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 65034 [logterm: 0, index: 0] at term 0, raft_id: 65033, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 65034, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:22:29.145 INFO raft.rs:2224 received votes response, raft_id: 65034, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 65033, vote: true    
25/11/30 09:22:29.145 INFO raft.rs:1156 became candidate at term 1, raft_id: 65034, term: 1    
25/11/30 09:22:29.146 INFO raft.rs:1311 broadcasting vote request, raft_id: 65034, to: [65033], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:22:29.247 INFO raft_node.rs:457 Raft soft state change, node id 65034, current leader 0    
25/11/30 09:22:29.248 INFO raft.rs:1376 received a message with higher term from 65034, raft_id: 65033, msg type: MsgRequestVote, message_term: 1, term: 0, from: 65034    
25/11/30 09:22:29.249 INFO raft.rs:1132 became follower at term 1, raft_id: 65033, term: 1    
25/11/30 09:22:29.249 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 65034 [logterm: 0, index: 0] at term 1, raft_id: 65033, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 65034, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:22:29.351 INFO raft.rs:2224 received votes response, raft_id: 65034, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 65033, vote: true    
25/11/30 09:22:29.351 INFO raft.rs:1240 became leader at term 1, raft_id: 65034, term: 1    
25/11/30 09:22:29.456 INFO raft_node.rs:457 Raft soft state change, node id 65034, current leader 65034    
25/11/30 09:22:29.469 INFO journal_test.rs:140 state 1 Exit    
25/11/30 09:22:29.469 INFO journal_test.rs:141 state 2 Active    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x146e190f0, 0x116f05530, 0x117805070, 0x117904f00], store: "<InodeStore>" }
inode: 0x117904f00
complete_file: 1764469349473
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x146e190f0, 0x116f05530, 0x1178051b0], store: "<InodeStore>" }
inode: 0x1178051b0
complete_file: 1764469349474
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x146e190f0, 0x116f05530, 0x1178051b0], store: "<InodeStore>" }
inode: 0x1178051b0
complete_file: 1764469349474
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:22:29.476 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2664407985, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:22:29.477 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2508896870, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:22:29.560 INFO raft_node.rs:457 Raft soft state change, node id 65033, current leader 65034    
25/11/30 09:22:36.976 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2664407985, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:22:37.906 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 2508896870, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 32.35s

âœ… Run 36 PASSED
ðŸ“Š Progress: 36 success, 0 fails
----------------------------------------
ðŸ”„ Run 37/100

running 1 test
25/11/30 09:23:12.651 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal"    
25/11/30 09:23:12.666 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:23:12.667 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:23:12.669 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta"    
25/11/30 09:23:12.687 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-1/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:23:12.689 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal"    
25/11/30 09:23:12.699 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/journal/checkpoint", family_list: ["default", "default", "meta"], disable_wal: false, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:23:12.700 INFO ttl_bucket.rs:123 Creating TTL bucket list with sorted storage, interval duration: 3600000ms    
25/11/30 09:23:12.700 INFO db_engine.rs:224 Delete(format) exists db path "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta"    
25/11/30 09:23:12.719 INFO db_engine.rs:41 Create rocksdb success, format: true, conf: DBConf { base_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta", data_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/data", checkpoint_dir: "/Users/mac/warehouse/OSS/curvine/curvine-server/../testing/raft-2/meta/checkpoint", family_list: ["default", "inodes", "edges", "block", "location", "mountpoints"], disable_wal: true, compression_type: None, db_write_buffer_size: 0, write_buffer_size: 67108864 }    
25/11/30 09:23:12.719 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:23:12.719 INFO raft.rs:2668 switched to configuration, raft_id: 65046, config: Configuration { voters: Configuration { incoming: Configuration { voters: {65046, 65047} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:23:12.720 INFO raft.rs:1132 became follower at term 0, raft_id: 65046, term: 0    
25/11/30 09:23:12.720 INFO raft.rs:393 newRaft, raft_id: 65046, peers: Configuration { incoming: Configuration { voters: {65046, 65047} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:23:12.720 INFO raw_node.rs:315 RawNode created with id 65046., raft_id: 65046, id: 65046    
25/11/30 09:23:12.722 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:65046, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:23:12.722 INFO raft_node.rs:245 install snapshot end, cost 0 ms    
25/11/30 09:23:12.722 INFO raft.rs:2668 switched to configuration, raft_id: 65047, config: Configuration { voters: Configuration { incoming: Configuration { voters: {65046, 65047} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }    
25/11/30 09:23:12.722 INFO raft.rs:1132 became follower at term 0, raft_id: 65047, term: 0    
25/11/30 09:23:12.722 INFO raft.rs:393 newRaft, raft_id: 65047, peers: Configuration { incoming: Configuration { voters: {65046, 65047} }, outgoing: Configuration { voters: {} } }, last term: 0, last index: 0, applied: 0, commit: 0, term: 0    
25/11/30 09:23:12.722 INFO raw_node.rs:315 RawNode created with id 65047., raft_id: 65047, id: 65047    
25/11/30 09:23:12.723 INFO rpc_server.rs:143 Rpc server [curvine-journal] start successfully, bind address: localhost:65047, hostname: localhost, thread_name: raft-rpc, io threads: 8, worker threads: 8    
25/11/30 09:23:14.046 INFO raft.rs:1562 starting a new election, raft_id: 65046, term: 0    
25/11/30 09:23:14.046 INFO raft.rs:1182 became pre-candidate at term 0, raft_id: 65046, term: 0    
25/11/30 09:23:14.046 INFO raft.rs:1311 broadcasting vote request, raft_id: 65046, to: [65047], log_index: 0, log_term: 0, term: 0, type: MsgRequestPreVote    
25/11/30 09:23:14.046 INFO raft_node.rs:460 Raft soft state change, node id 65046, current leader 0    
25/11/30 09:23:14.047 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 65046 [logterm: 0, index: 0] at term 0, raft_id: 65047, msg type: MsgRequestPreVote, term: 0, msg_index: 0, msg_term: 0, from: 65046, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:23:14.151 INFO raft.rs:2224 received votes response, raft_id: 65046, term: 0, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 65047, vote: true    
25/11/30 09:23:14.151 INFO raft.rs:1156 became candidate at term 1, raft_id: 65046, term: 1    
25/11/30 09:23:14.151 INFO raft.rs:1311 broadcasting vote request, raft_id: 65046, to: [65047], log_index: 0, log_term: 0, term: 1, type: MsgRequestVote    
25/11/30 09:23:14.252 INFO raft_node.rs:460 Raft soft state change, node id 65046, current leader 0    
25/11/30 09:23:14.252 INFO raft.rs:1376 received a message with higher term from 65046, raft_id: 65047, msg type: MsgRequestVote, message_term: 1, term: 0, from: 65046    
25/11/30 09:23:14.252 INFO raft.rs:1132 became follower at term 1, raft_id: 65047, term: 1    
25/11/30 09:23:14.252 INFO raft.rs:1577 [logterm: 0, index: 0, vote: 0] cast vote for 65046 [logterm: 0, index: 0] at term 1, raft_id: 65047, msg type: MsgRequestVote, term: 1, msg_index: 0, msg_term: 0, from: 65046, vote: 0, log_index: 0, log_term: 0    
25/11/30 09:23:14.353 INFO raft.rs:2224 received votes response, raft_id: 65046, term: 1, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 65047, vote: true    
25/11/30 09:23:14.353 INFO raft.rs:1240 became leader at term 1, raft_id: 65046, term: 1    
25/11/30 09:23:14.456 INFO raft_node.rs:460 Raft soft state change, node id 65046, current leader 65046    
25/11/30 09:23:14.530 INFO journal_test.rs:140 state 1 Active    
25/11/30 09:23:14.530 INFO journal_test.rs:141 state 2 Exit    
inp: InodePath { path: "/journal/b/test.log", name: "test.log", components: ["", "journal", "b", "test.log"], inodes: [0x12e00f680, 0x12e026420, 0x12d6463a0, 0x12d646790], store: "<InodeStore>" }
inode: 0x12d646790
complete_file: 1764469394531
commit_blocks: [CommitBlock { block_id: 16944988160, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x12e00f680, 0x12e026420, 0x12d646790], store: "<InodeStore>" }
inode: 0x12d646790
complete_file: 1764469394532
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 10, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:23:14.532 WARN cluster_connector.rs:272 Rpc(-6703845410065917849) call failed to active master localhost:65047: Not leader:     
inp: InodePath { path: "/journal/append.log", name: "append.log", components: ["", "journal", "append.log"], inodes: [0x12e00f680, 0x12e026420, 0x12d646790], store: "<InodeStore>" }
inode: 0x12d646790
complete_file: 1764469394532
commit_blocks: [CommitBlock { block_id: 16961765376, block_len: 13, locations: [BlockLocation { worker_id: 100, storage_type: Disk }] }]
25/11/30 09:23:14.533 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2520794158, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:23:14.533 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1834967106, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:23:14.634 INFO raft_node.rs:460 Raft soft state change, node id 65047, current leader 65046    
25/11/30 09:23:41.822 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/y/z", ufs_path: "oss://cluster1/", mount_id: 2520794158, properties: {"k1": "v1"}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:23:42.751 INFO mount_table.rs:106 add mount: MountInfo { cv_path: "/x/z/y", ufs_path: "hdfs://cluster1/", mount_id: 1834967106, properties: {}, ttl_ms: 0, ttl_action: None, consistency_strategy: None, storage_type: None, block_size: None, replicas: None, mount_type: Cst }    
25/11/30 09:23:43.403 INFO rpc_server.rs:125 Receive ctrl_c signal, shutting down curvine-journal    
25/11/30 09:23:43.403 INFO rpc_server.rs:125 Receive ctrl_c signal, shutting down curvine-journal    
25/11/30 09:23:43.403 INFO rpc_server.rs:137 The server has stopped    
25/11/30 09:23:43.403 INFO rpc_server.rs:137 The server has stopped    
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
.
â”œâ”€â”€ journal
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â””â”€â”€ test.log
â”‚   â”œâ”€â”€ append.log
â”‚   â””â”€â”€ b
â”œâ”€â”€ journal_1
â”‚   â”œâ”€â”€ a
â”‚   â””â”€â”€ b
â””â”€â”€ x
    â”œâ”€â”€ y
    â”‚   â””â”€â”€ z
    â””â”€â”€ z
        â””â”€â”€ y
test check_raft_state ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 31.90s

