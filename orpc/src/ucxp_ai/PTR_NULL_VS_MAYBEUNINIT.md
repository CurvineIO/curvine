# ptr::null_mut() vs MaybeUninit å®‰å…¨æ€§åˆ†æ

## ğŸ¤” é—®é¢˜æ ¸å¿ƒ

ç”¨ `ptr::null_mut()` æ›¿æ¢ `MaybeUninit` æ˜¯å¦ä¼šæœ‰é—®é¢˜ï¼Ÿ

**ç®€çŸ­ç­”æ¡ˆ**: åœ¨ FFI è¾“å‡ºå‚æ•°åœºæ™¯ä¸­ï¼Œ`ptr::null_mut()` **ä¸ä»…å®‰å…¨ï¼Œè€Œä¸”æ›´åˆé€‚**ã€‚

## ğŸ” è¯¦ç»†åˆ†æ

### åœºæ™¯å¯¹æ¯”

#### å½“å‰ UCX çš„ä½¿ç”¨åœºæ™¯ï¼š
```rust
// C å‡½æ•°ç­¾å (æ¦‚å¿µä¸Š):
// int ucp_config_read(const char* env_prefix, const char* filename, ucp_config_t** config_p);
//                                                                    ^^^^^^^^^^^
//                                                                    è¾“å‡ºå‚æ•°
```

è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ **C è¾“å‡ºå‚æ•°æ¨¡å¼**ï¼š
- C å‡½æ•°æ¥æ”¶ä¸€ä¸ªæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆ
- å‡½æ•°å†…éƒ¨åˆ†é…å†…å­˜å¹¶è®¾ç½®æŒ‡é’ˆå€¼
- è°ƒç”¨è€…æä¾›æŒ‡é’ˆçš„åœ°å€ä¾›å‡½æ•°å†™å…¥

### æ–¹æ¡ˆå¯¹æ¯”

#### âŒ æ–¹æ¡ˆ A: MaybeUninit (è¿‡åº¦å¤æ‚)
```rust
let mut handle = MaybeUninit::<*mut ucp_config_t>::uninit();
let status = unsafe {
    ucp_config_read(
        ptr::null(), 
        ptr::null(), 
        handle.as_mut_ptr()  // *mut (*mut ucp_config_t)
    )
};
let handle = unsafe { handle.assume_init() };  // ğŸš¨ æ½œåœ¨å±é™©
```

**é—®é¢˜ï¼š**
- `assume_init()` å‡è®¾å†…å­˜å·²è¢«æ­£ç¡®åˆå§‹åŒ–
- å¦‚æœ C å‡½æ•°å¤±è´¥ä½†ä»ç„¶å†™å…¥äº†åƒåœ¾æ•°æ®ï¼Œä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸º
- è¿‡åº¦å¤æ‚åŒ–äº†ç®€å•çš„æŒ‡é’ˆä¼ é€’

#### âœ… æ–¹æ¡ˆ B: ptr::null_mut() (æ¨è)
```rust
let mut handle: *mut ucp_config_t = ptr::null_mut();
let status = unsafe {
    ucp_config_read(
        ptr::null(), 
        ptr::null(), 
        &mut handle  // *mut (*mut ucp_config_t)
    )
};
// handle ç°åœ¨åŒ…å«æœ‰æ•ˆæŒ‡é’ˆï¼ˆå¦‚æœæˆåŠŸï¼‰æˆ–ä¿æŒä¸ºç©ºï¼ˆå¦‚æœå¤±è´¥ï¼‰
```

**ä¼˜åŠ¿ï¼š**
- åˆå§‹çŠ¶æ€æ˜ç¡®ï¼šç©ºæŒ‡é’ˆ
- C å‡½æ•°å¤±è´¥æ—¶ï¼ŒæŒ‡é’ˆä¿æŒä¸ºç©ºï¼ˆå¯æ£€æŸ¥ï¼‰
- æ— éœ€ `assume_init()`ï¼Œé¿å…æœªå®šä¹‰è¡Œä¸º
- ä»£ç æ›´æ¸…æ™°ç®€æ´

## ğŸ§ª å®é™…æµ‹è¯•

è®©æˆ‘åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ¥è¯æ˜è¿™ä¸ªè§‚ç‚¹ï¼š
